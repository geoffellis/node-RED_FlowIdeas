[
    {
        "id": "f6f2187d.f17ca8",
        "type": "tab",
        "label": "Power",
        "disabled": true,
        "info": ""
    },
    {
        "id": "65853bc12ed0cd16",
        "type": "tab",
        "label": "Coffee Roaster",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "9ee26a7af4143d61",
        "type": "tab",
        "label": "Coffee Color",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "78e8048a75698e3b",
        "type": "tab",
        "label": "Scratch1",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "536de40af535d04c",
        "type": "tab",
        "label": "Lights",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "23fd49686f88e3be",
        "type": "gauth"
    },
    {
        "id": "d2d2d66e3cef1cdd",
        "type": "mqtt-broker",
        "name": "",
        "broker": "192.168.0.163",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "3",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "b757fed52d53e0ad",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "722ac60d0202ced9",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "icon",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "20b888e14f6927fd",
        "type": "ui_group",
        "name": "Temperature",
        "tab": "b757fed52d53e0ad",
        "order": 1,
        "disp": true,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4f1d7d4967f467e6",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 1,
        "width": 12,
        "height": 1
    },
    {
        "id": "959e58fa43cd2a10",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 2,
        "width": 12,
        "height": 1
    },
    {
        "id": "9bb3689238976006",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 3,
        "width": 12,
        "height": 1
    },
    {
        "id": "bded49193d2ad169",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 4,
        "width": 12,
        "height": 1
    },
    {
        "id": "b3fbbac122614c5f",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 5,
        "width": 12,
        "height": 1
    },
    {
        "id": "2755f01918e0b8b0",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 6,
        "width": 12,
        "height": 1
    },
    {
        "id": "d4c63deb6bbb88dd",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 7,
        "width": 12,
        "height": 1
    },
    {
        "id": "45516cd0e2b9834e",
        "type": "ui_spacer",
        "z": "65853bc12ed0cd16",
        "name": "spacer",
        "group": "80f91b5b91211b66",
        "order": 8,
        "width": 12,
        "height": 1
    },
    {
        "id": "495ea1bbb22348c8",
        "type": "ui_group",
        "name": "Values & Settings",
        "tab": "b757fed52d53e0ad",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "ba799367.ad2e3",
        "type": "ui_group",
        "name": "Group 2",
        "tab": "21cd106a.5f882",
        "order": 2,
        "disp": true,
        "width": 6
    },
    {
        "id": "8a23a84e.52b3f8",
        "type": "ui_group",
        "name": "Group 1",
        "tab": "21cd106a.5f882",
        "order": 1,
        "disp": false,
        "width": "15",
        "collapse": false
    },
    {
        "id": "21cd106a.5f882",
        "type": "ui_tab",
        "name": "Webcam",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "3510553dfa52672e",
        "type": "ui_group",
        "name": "Color",
        "tab": "b757fed52d53e0ad",
        "order": 3,
        "disp": true,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ec76383e9eb4eed0",
        "type": "alexa-home-conf",
        "username": "geoffrey.stuart.ellis@gmail.com"
    },
    {
        "id": "3cc11d24.ff01a2",
        "type": "comment",
        "z": "f6f2187d.f17ca8",
        "name": "WARNING: please check you have started this container with a volume that is mounted to /data\\n otherwise any flow changes are lost when you redeploy or upgrade the container\\n (e.g. upgrade to a more recent node-red docker image).\\n  If you are using named volumes you can ignore this warning.\\n Double click or see info side panel to learn how to start Node-RED in Docker to save your work",
        "info": "\n[https://docs.google.com/spreadsheets/d/1otS_G9Tae0oPVOjOVkDG6I9tnrj5Q5265tlB7Ts3sJc/edit#gid=0](Google Sheet)\n\nTo start docker with a bind mount volume (-v option), for example:\n\n```\ndocker run -it -p 1880:1880 -v /home/user/node_red_data:/data --name mynodered nodered/node-red\n```\n\nwhere `/home/user/node_red_data` is a directory on your host machine where you want to store your flows.\n\nIf you do not do this then you can experiment and redploy flows, but if you restart or upgrade the container the flows will be disconnected and lost. \n\nThey will still exist in a hidden data volume, which can be recovered using standard docker techniques, but that is much more complex than just starting with a named volume as described above.\n\nhttps://www.rodened.com/posts/how-to-read-and-write-data-to-a-google-sheet-in-node-red-1/#:~:text=Go%20to%20the%20node-red%20editor%20and%20open%20the,the%20Scopes%20further%20down%20in%20the%20configuration%20window.",
        "x": 240,
        "y": 60,
        "wires": []
    },
    {
        "id": "1bf3b114c06ea51a",
        "type": "kasa",
        "z": "f6f2187d.f17ca8",
        "name": "Phone Plug - KP115(US)",
        "device": "192.168.0.136",
        "interval": "10000",
        "eventInterval": "5000",
        "payload": "getQuickInfo",
        "payloadType": "info",
        "debug": false,
        "x": 530,
        "y": 220,
        "wires": [
            [
                "f6fd254feb89945a",
                "7b0c1a5813684be5",
                "d58a1a25e1da952c",
                "fcaf0e1d9d611420"
            ]
        ]
    },
    {
        "id": "7c88d3051ecbbddf",
        "type": "inject",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "getQuickInfo",
        "payloadType": "str",
        "x": 120,
        "y": 220,
        "wires": [
            [
                "dca35781dc909c8f",
                "1bf3b114c06ea51a"
            ]
        ]
    },
    {
        "id": "079fd9adc5b34032",
        "type": "inject",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "toggle",
        "payloadType": "str",
        "x": 150,
        "y": 180,
        "wires": [
            [
                "61a8c9bd6a61bbc2"
            ]
        ]
    },
    {
        "id": "19014adf054dbad2",
        "type": "GSheet",
        "z": "f6f2187d.f17ca8",
        "creds": "23fd49686f88e3be",
        "method": "append",
        "action": "",
        "sheet": "1otS_G9Tae0oPVOjOVkDG6I9tnrj5Q5265tlB7Ts3sJc",
        "cells": "Sheet1!A1:M10000",
        "flatten": true,
        "name": "Google Sheet",
        "x": 1040,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "0853034c5a052deb",
        "type": "function",
        "z": "f6f2187d.f17ca8",
        "name": "To Array",
        "func": "msg.payload = [msg.payload.timestamp,msg.payload.emeter.realtime.current_ma,msg.payload.emeter.realtime.power,msg.payload.emeter.realtime.total_wh]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 220,
        "wires": [
            [
                "19014adf054dbad2"
            ]
        ]
    },
    {
        "id": "f6fd254feb89945a",
        "type": "rbe",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload.emeter.realtime.current_ma",
        "topi": "topic",
        "x": 750,
        "y": 220,
        "wires": [
            [
                "0853034c5a052deb"
            ]
        ]
    },
    {
        "id": "7b0c1a5813684be5",
        "type": "switch",
        "z": "f6f2187d.f17ca8",
        "name": "Turn Off",
        "property": "payload.emeter.realtime.current_ma",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-1",
                "vt": "str"
            },
            {
                "t": "lte",
                "v": "30",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 120,
        "y": 420,
        "wires": [
            [],
            [
                "05649791ccdafe11"
            ]
        ]
    },
    {
        "id": "05649791ccdafe11",
        "type": "trigger",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "op1": "off",
        "op2": "on",
        "op1type": "str",
        "op2type": "str",
        "duration": "18",
        "extend": false,
        "overrideDelay": false,
        "units": "hr",
        "reset": "toggle",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 350,
        "y": 420,
        "wires": [
            [
                "f17b7f74b36a8c03",
                "61a8c9bd6a61bbc2"
            ]
        ]
    },
    {
        "id": "fcaf0e1d9d611420",
        "type": "debug",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 160,
        "wires": []
    },
    {
        "id": "5f0f7ff475b0df30",
        "type": "comment",
        "z": "f6f2187d.f17ca8",
        "name": "Link to sheet",
        "info": "[https://docs.google.com/spreadsheets/d/1otS_G9Tae0oPVOjOVkDG6I9tnrj5Q5265tlB7Ts3sJc/edit#gid=0](link)",
        "x": 380,
        "y": 540,
        "wires": []
    },
    {
        "id": "70680154ce6f7121",
        "type": "function",
        "z": "f6f2187d.f17ca8",
        "name": "Erase Stats",
        "func": "if (msg.payload==\"off\")\n    msg.payload=\"eraseStats\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 90,
        "y": 300,
        "wires": [
            [
                "1bf3b114c06ea51a"
            ]
        ]
    },
    {
        "id": "d58a1a25e1da952c",
        "type": "function",
        "z": "f6f2187d.f17ca8",
        "name": "Reset",
        "func": "if (typeof msg.payload.sysInfo !== 'undefined')\n    if (msg.payload.sysInfo.relay_state==1){\n        msg.reset=true;\n        return msg;\n    }\n\nreturn null;\n    ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 110,
        "y": 460,
        "wires": [
            [
                "05649791ccdafe11"
            ]
        ]
    },
    {
        "id": "f17b7f74b36a8c03",
        "type": "debug",
        "z": "f6f2187d.f17ca8",
        "name": "tigger_debug",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 360,
        "wires": []
    },
    {
        "id": "75b9e35836b690af",
        "type": "inject",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "date",
        "x": 110,
        "y": 520,
        "wires": [
            [
                "05649791ccdafe11"
            ]
        ]
    },
    {
        "id": "fc7ff10193ea7180",
        "type": "switch",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "property": "payload.failed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "10",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 440,
        "y": 640,
        "wires": [
            [
                "67699a665602bb7a",
                "f17b7f74b36a8c03",
                "4b72b92fdd52bbad"
            ]
        ]
    },
    {
        "id": "67699a665602bb7a",
        "type": "change",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 535,
        "y": 640,
        "wires": [
            [
                "f17b7f74b36a8c03",
                "61a8c9bd6a61bbc2"
            ]
        ],
        "l": false
    },
    {
        "id": "dca35781dc909c8f",
        "type": "tcp-ping",
        "z": "f6f2187d.f17ca8",
        "ip": "192.168.0.127",
        "port": "22000",
        "count": "10",
        "interval": "30000",
        "timeout": "10000",
        "topic": "",
        "name": "",
        "x": 260,
        "y": 640,
        "wires": [
            [
                "fc7ff10193ea7180",
                "fa5a07c55dcac919"
            ]
        ]
    },
    {
        "id": "4b72b92fdd52bbad",
        "type": "debug",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 720,
        "wires": []
    },
    {
        "id": "fa5a07c55dcac919",
        "type": "debug",
        "z": "f6f2187d.f17ca8",
        "name": "TCP",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 780,
        "wires": []
    },
    {
        "id": "7931dd0275f44101",
        "type": "debug",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 215,
        "y": 875,
        "wires": []
    },
    {
        "id": "a00d932d95b2148d",
        "type": "catch",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 65,
        "y": 875,
        "wires": [
            [
                "7931dd0275f44101"
            ]
        ]
    },
    {
        "id": "61a8c9bd6a61bbc2",
        "type": "delay",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 390,
        "y": 160,
        "wires": [
            [
                "1bf3b114c06ea51a",
                "70680154ce6f7121"
            ]
        ]
    },
    {
        "id": "7bdf77d223056312",
        "type": "rbe",
        "z": "f6f2187d.f17ca8",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 960,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "533dbfd27831c529",
        "type": "mqtt in",
        "z": "65853bc12ed0cd16",
        "name": "",
        "topic": "bbq/temperature/2",
        "qos": "0",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 220,
        "wires": [
            [
                "6cae58f9c62f9a57"
            ]
        ]
    },
    {
        "id": "0b7317e9d926883b",
        "type": "mqtt in",
        "z": "65853bc12ed0cd16",
        "name": "",
        "topic": "bbq/temperature/1",
        "qos": "0",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 140,
        "wires": [
            [
                "6fce01b1e3d93c7d"
            ]
        ]
    },
    {
        "id": "a116f4c78bd62774",
        "type": "GSheet",
        "z": "65853bc12ed0cd16",
        "creds": "23fd49686f88e3be",
        "method": "append",
        "action": "",
        "sheet": "1otS_G9Tae0oPVOjOVkDG6I9tnrj5Q5265tlB7Ts3sJc",
        "cells": "coffee!A1:L10000",
        "flatten": true,
        "name": "Google Sheet",
        "x": 1480,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "ca95fa67badc3b05",
        "type": "ui_chart",
        "z": "65853bc12ed0cd16",
        "name": "Temperature Chart",
        "group": "20b888e14f6927fd",
        "order": 1,
        "width": "12",
        "height": "10",
        "label": "Temperature",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1430,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "a85de45a854161bf",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 3,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "Inlet",
        "label": "degF",
        "format": "{{value}}",
        "min": 0,
        "max": "600",
        "colors": [
            "#8caafa",
            "#008c00",
            "#ca3838"
        ],
        "seg1": "300",
        "seg2": "500",
        "className": "",
        "x": 910,
        "y": 140,
        "wires": []
    },
    {
        "id": "bc7a16ac0ea97f6d",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 4,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "Internal #1",
        "label": "degF",
        "format": "{{value}}",
        "min": 0,
        "max": "600",
        "colors": [
            "#8caafa",
            "#008c00",
            "#ca3838"
        ],
        "seg1": "300",
        "seg2": "500",
        "className": "",
        "x": 930,
        "y": 220,
        "wires": []
    },
    {
        "id": "255a7c16c231692f",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 5,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "Internal #2",
        "label": "degF",
        "format": "{{value}}",
        "min": 0,
        "max": "600",
        "colors": [
            "#8caafa",
            "#008c00",
            "#ca3838"
        ],
        "seg1": "300",
        "seg2": "500",
        "className": "",
        "x": 930,
        "y": 300,
        "wires": []
    },
    {
        "id": "ae85f398fe7776b0",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 6,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "Exit",
        "label": "degF",
        "format": "{{value}}",
        "min": 0,
        "max": "600",
        "colors": [
            "#8caafa",
            "#008c00",
            "#ca3838"
        ],
        "seg1": "300",
        "seg2": "500",
        "className": "",
        "x": 910,
        "y": 380,
        "wires": []
    },
    {
        "id": "b7224f4116562bbc",
        "type": "mqtt in",
        "z": "65853bc12ed0cd16",
        "name": "",
        "topic": "bbq/temperature/3",
        "qos": "0",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 300,
        "wires": [
            [
                "e51537a527b24c4e"
            ]
        ]
    },
    {
        "id": "70e38a83fe5b9f49",
        "type": "mqtt in",
        "z": "65853bc12ed0cd16",
        "name": "",
        "topic": "bbq/temperature/4",
        "qos": "0",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 380,
        "wires": [
            [
                "a4e96f8af8c02a80"
            ]
        ]
    },
    {
        "id": "6c2080b64bb5dc39",
        "type": "inject",
        "z": "65853bc12ed0cd16",
        "name": "resetChart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "resetChart",
        "payload": "[]",
        "payloadType": "jsonata",
        "x": 940,
        "y": 60,
        "wires": [
            [
                "ca95fa67badc3b05",
                "9617c3d99a77cf26"
            ]
        ]
    },
    {
        "id": "96c0293ba34ff8a4",
        "type": "delay",
        "z": "65853bc12ed0cd16",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1120,
        "y": 840,
        "wires": [
            [
                "03043595cd8d409a"
            ]
        ]
    },
    {
        "id": "b719fc2b5f983d0e",
        "type": "file",
        "z": "65853bc12ed0cd16",
        "name": "",
        "filename": "coffee.csv",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1520,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "8db9d2de3ad0f271",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "",
        "func": "if(Array.isArray(msg.payload)){\n    msg.payload = msg.payload.toString();\n    return msg;\n} else\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 720,
        "wires": [
            [
                "707d8f02b1c2f43c"
            ]
        ]
    },
    {
        "id": "9be07389db79cae0",
        "type": "debug",
        "z": "65853bc12ed0cd16",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 250,
        "y": 60,
        "wires": []
    },
    {
        "id": "e6f10274562c152b",
        "type": "ui_switch",
        "z": "65853bc12ed0cd16",
        "name": "",
        "label": "Google Sheet Switch",
        "tooltip": "",
        "group": "495ea1bbb22348c8",
        "order": 2,
        "width": "6",
        "height": "1",
        "passthru": false,
        "decouple": "false",
        "topic": "switch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1100,
        "y": 780,
        "wires": [
            [
                "03043595cd8d409a"
            ]
        ]
    },
    {
        "id": "872b4c711c831b89",
        "type": "ui_switch",
        "z": "65853bc12ed0cd16",
        "name": "",
        "label": "Local CSV Switch",
        "tooltip": "",
        "group": "495ea1bbb22348c8",
        "order": 1,
        "width": "6",
        "height": "1",
        "passthru": false,
        "decouple": "false",
        "topic": "switch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1130,
        "y": 660,
        "wires": [
            [
                "707d8f02b1c2f43c"
            ]
        ]
    },
    {
        "id": "1f5f020fde1c31fd",
        "type": "catch",
        "z": "65853bc12ed0cd16",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 90,
        "y": 60,
        "wires": [
            [
                "9be07389db79cae0"
            ]
        ]
    },
    {
        "id": "707d8f02b1c2f43c",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "",
        "func": "if(msg.topic && msg.topic == 'switch'){\n    context.pass=msg.payload;\n    msg = null;\n} else if(context.pass == false)\n    msg = null;\n    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.pass = false;",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 720,
        "wires": [
            [
                "b719fc2b5f983d0e",
                "422fe8ad66a33048"
            ]
        ]
    },
    {
        "id": "03043595cd8d409a",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "",
        "func": "if(msg.topic && msg.topic == 'switch'){\n    context.pass=msg.payload;\n    msg = null;\n} else if(context.pass == false)\n    msg = null;\n    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.pass = false;",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 840,
        "wires": [
            [
                "a116f4c78bd62774",
                "dcc1c1e31136c88e"
            ]
        ]
    },
    {
        "id": "c6ff6dfa8660daa1",
        "type": "join",
        "z": "65853bc12ed0cd16",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "15",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 830,
        "y": 720,
        "wires": [
            [
                "d57818201b63b45a",
                "fd502efe0bcf80f9"
            ]
        ]
    },
    {
        "id": "739ff2c2f2417c08",
        "type": "inject",
        "z": "65853bc12ed0cd16",
        "name": "clearFile",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "resetChart",
        "payload": "\"time\",\"Inlet\",\"Internal_1\",Internal_2\",\"Exit\",\"Ave\",\"RoR\",\"R\",\"G\",\"B\",\"H\",\"S\",\"V\",\"output\"",
        "payloadType": "str",
        "x": 1360,
        "y": 660,
        "wires": [
            [
                "a9b88e320674cb31"
            ]
        ]
    },
    {
        "id": "a9b88e320674cb31",
        "type": "file",
        "z": "65853bc12ed0cd16",
        "name": "",
        "filename": "coffee.csv",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1520,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "9617c3d99a77cf26",
        "type": "ui_chart",
        "z": "65853bc12ed0cd16",
        "name": "RoR Chart",
        "group": "20b888e14f6927fd",
        "order": 2,
        "width": "12",
        "height": "6",
        "label": "Rate Of Rise",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "20",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#bcdaf0",
            "#000000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1410,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "a4e96f8af8c02a80",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "lpf",
        "func": "//Low Pass Filter (lpf)\ntau=80.0; // Time constant in (seconds)\n\nt0 = (new Date()).getTime();\nt1 = context.get('t1')\nx0 = parseFloat(msg.payload);\nx1 = context.get('x1')\n\n\n\nif ( !isNaN(t0) && !isNaN(t1) && !isNaN(x0) && !isNaN(x1) ){\n    if( t1 == t0)\n        msg = null;\n    else {\n        a = Math.exp(-(t0-t1)/1000/tau);\n        msg.payload = a*x0+(1.0-a)*x1;\n        msg.topic=msg.topic+\" lpf\";\n        msg.debug = {\n            't0':t0\n            ,'t1':t1\n            ,'x0':x0\n            ,'x1':x1\n            ,'a':a\n        }\n        context.set('t1', t0);\n        context.set('x1', msg.payload);\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.set('t1', (new Date()).getTime());\ncontext.set('x1', 70);\n",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 380,
        "wires": [
            [
                "c6ff6dfa8660daa1",
                "d69a59ac3fe91769",
                "ca95fa67badc3b05"
            ]
        ]
    },
    {
        "id": "b10826b09f453819",
        "type": "change",
        "z": "65853bc12ed0cd16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(msg.payload, 1)\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 140,
        "wires": [
            [
                "a85de45a854161bf"
            ]
        ],
        "l": false
    },
    {
        "id": "e7aff0244997141d",
        "type": "change",
        "z": "65853bc12ed0cd16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(msg.payload, 1)\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 220,
        "wires": [
            [
                "bc7a16ac0ea97f6d"
            ]
        ],
        "l": false
    },
    {
        "id": "02570cc576caa846",
        "type": "change",
        "z": "65853bc12ed0cd16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(msg.payload, 1)\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 300,
        "wires": [
            [
                "255a7c16c231692f"
            ]
        ],
        "l": false
    },
    {
        "id": "d69a59ac3fe91769",
        "type": "change",
        "z": "65853bc12ed0cd16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(msg.payload, 1)\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 380,
        "wires": [
            [
                "ae85f398fe7776b0"
            ]
        ],
        "l": false
    },
    {
        "id": "d58fb2b16fe45e4b",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "Ave of Internal T",
        "func": "const time =new Date().toISOString().\n                    replace(/T/, ' ').      // replace T with a space\n                    replace(/\\..+/, '');     // delete the dot and everything after\n\nconst newMsg = { \n     'payload': ( msg.payload['bbq/temperature/2 lpf'] + msg.payload['bbq/temperature/3 lpf'] ) / 2.0\n    ,'topic': \"Ave of Internal Temperatures\"\n    ,'time': time\n    ,'debug': {\n         \"T2\":msg.payload['bbq/temperature/2 lpf'] \n        ,\"T3\":msg.payload['bbq/temperature/3 lpf'] \n    }\n    \n}\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 540,
        "wires": [
            [
                "ca95fa67badc3b05",
                "c6ff6dfa8660daa1",
                "6539664ab2acd607",
                "6e6d01e8c9815372",
                "03d49ced8fde7398"
            ]
        ]
    },
    {
        "id": "d57818201b63b45a",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "",
        "func": "const objectToArray = obj => {\n   const keys = Object.keys(obj);\n   var res = [];\n   for(let i = 0; i < keys.length; i++){\n      res.push(obj[keys[i]]);\n   }\n   return res;\n};\nvar newMsg = {}\nconst time =new Date().toISOString().\n                    replace(/T/, ' ').      // replace T with a space\n                    replace(/\\..+/, '');     // delete the dot and everything after\nnewMsg.time = time;\nnewMsg.topic = time;\nnewPayload = objectToArray(msg.payload);\nnewPayload.unshift(time);\nnewMsg.payload = newPayload;\n\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 915,
        "y": 720,
        "wires": [
            [
                "8db9d2de3ad0f271",
                "96c0293ba34ff8a4"
            ]
        ],
        "l": false
    },
    {
        "id": "bb9d410e0a14f72e",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 7,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "RoR",
        "label": "degF/m",
        "format": "{{value}}",
        "min": 0,
        "max": "20",
        "colors": [
            "#8caafa",
            "#008c00",
            "#ca3838"
        ],
        "seg1": "3",
        "seg2": "12",
        "className": "",
        "x": 910,
        "y": 620,
        "wires": []
    },
    {
        "id": "ca5e768d574ad134",
        "type": "change",
        "z": "65853bc12ed0cd16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(msg.payload,1)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 620,
        "wires": [
            [
                "bb9d410e0a14f72e",
                "9617c3d99a77cf26"
            ]
        ],
        "l": false
    },
    {
        "id": "5ae9d774abd357e9",
        "type": "GSheet",
        "z": "65853bc12ed0cd16",
        "creds": "23fd49686f88e3be",
        "method": "get",
        "action": "",
        "sheet": "1otS_G9Tae0oPVOjOVkDG6I9tnrj5Q5265tlB7Ts3sJc",
        "cells": "coffee_run!B143:E488",
        "flatten": false,
        "name": "Playback",
        "x": 115,
        "y": 480,
        "wires": [
            [
                "98c22689370a46e5"
            ]
        ],
        "l": false
    },
    {
        "id": "93522e5aadc7813b",
        "type": "inject",
        "z": "65853bc12ed0cd16",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 55,
        "y": 480,
        "wires": [
            [
                "5ae9d774abd357e9"
            ]
        ],
        "l": false
    },
    {
        "id": "e51537a527b24c4e",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "lpf",
        "func": "//Low Pass Filter (lpf)\ntau=80.0; // Time constant in (seconds)\n\nt0 = (new Date()).getTime();\nt1 = context.get('t1')\nx0 = parseFloat(msg.payload);\nx1 = context.get('x1')\n\n\n\nif ( !isNaN(t0) && !isNaN(t1) && !isNaN(x0) && !isNaN(x1) ){\n    if( t1 == t0)\n        msg = null;\n    else {\n        a = Math.exp(-(t0-t1)/1000/tau);\n        msg.payload = a*x0+(1.0-a)*x1;\n        msg.topic=msg.topic+\" lpf\";\n        msg.debug = {\n            't0':t0\n            ,'t1':t1\n            ,'x0':x0\n            ,'x1':x1\n            ,'a':a\n        }\n        context.set('t1', t0);\n        context.set('x1', msg.payload);\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.set('t1', (new Date()).getTime());\ncontext.set('x1', 70);\n",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 300,
        "wires": [
            [
                "02570cc576caa846",
                "c6ff6dfa8660daa1",
                "ca95fa67badc3b05",
                "73f5a3ca59c244fe"
            ]
        ]
    },
    {
        "id": "6cae58f9c62f9a57",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "lpf",
        "func": "//Low Pass Filter (lpf)\ntau=80.0; // Time constant in (seconds)\n\nt0 = (new Date()).getTime();\nt1 = context.get('t1')\nx0 = parseFloat(msg.payload);\nx1 = context.get('x1')\n\n\n\nif ( !isNaN(t0) && !isNaN(t1) && !isNaN(x0) && !isNaN(x1) ){\n    if( t1 == t0)\n        msg = null;\n    else {\n        a = Math.exp(-(t0-t1)/1000/tau);\n        msg.payload = a*x0+(1.0-a)*x1;\n        msg.topic=msg.topic+\" lpf\";\n        msg.debug = {\n            't0':t0\n            ,'t1':t1\n            ,'x0':x0\n            ,'x1':x1\n            ,'a':a\n        }\n        context.set('t1', t0);\n        context.set('x1', msg.payload);\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.set('t1', (new Date()).getTime());\ncontext.set('x1', 70);\n",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 220,
        "wires": [
            [
                "e7aff0244997141d",
                "c6ff6dfa8660daa1",
                "ca95fa67badc3b05",
                "73f5a3ca59c244fe"
            ]
        ]
    },
    {
        "id": "6fce01b1e3d93c7d",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "lpf",
        "func": "//Low Pass Filter (lpf)\ntau=80.0; // Time constant in (seconds)\n\nt0 = (new Date()).getTime();\nt1 = context.get('t1')\nx0 = parseFloat(msg.payload);\nx1 = context.get('x1')\n\n\n\nif ( !isNaN(t0) && !isNaN(t1) && !isNaN(x0) && !isNaN(x1) ){\n    if( t1 == t0)\n        msg = null;\n    else {\n        a = Math.exp(-(t0-t1)/1000/tau);\n        msg.payload = a*x0+(1.0-a)*x1;\n        msg.topic=msg.topic+\" lpf\";\n        msg.debug = {\n            't0':t0\n            ,'t1':t1\n            ,'x0':x0\n            ,'x1':x1\n            ,'a':a\n        }\n        context.set('t1', t0);\n        context.set('x1', msg.payload);\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.set('t1', (new Date()).getTime());\ncontext.set('x1', 70);\n",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 140,
        "wires": [
            [
                "c6ff6dfa8660daa1",
                "ca95fa67badc3b05",
                "b10826b09f453819",
                "03d49ced8fde7398"
            ]
        ]
    },
    {
        "id": "73f5a3ca59c244fe",
        "type": "join",
        "z": "65853bc12ed0cd16",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 435,
        "y": 540,
        "wires": [
            [
                "d58fb2b16fe45e4b"
            ]
        ],
        "l": false
    },
    {
        "id": "fd502efe0bcf80f9",
        "type": "debug",
        "z": "65853bc12ed0cd16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 1020,
        "wires": []
    },
    {
        "id": "98c22689370a46e5",
        "type": "split",
        "z": "65853bc12ed0cd16",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 175,
        "y": 480,
        "wires": [
            [
                "8f7a453069a50a46"
            ]
        ],
        "l": false
    },
    {
        "id": "74e07da9f788883a",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "",
        "func": "\nreturn [{'payload':msg.payload[0],'topic':'bbq/temperature/1'}, \n        {'payload':msg.payload[1],'topic':'bbq/temperature/2'},\n        {'payload':msg.payload[2],'topic':'bbq/temperature/3'},\n        {'payload':msg.payload[3],'topic':'bbq/temperature/4'}\n       ];",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 295,
        "y": 480,
        "wires": [
            [
                "6fce01b1e3d93c7d"
            ],
            [
                "6cae58f9c62f9a57"
            ],
            [
                "e51537a527b24c4e"
            ],
            [
                "a4e96f8af8c02a80"
            ]
        ],
        "icon": "node-red/switch.svg",
        "l": false
    },
    {
        "id": "8f7a453069a50a46",
        "type": "delay",
        "z": "65853bc12ed0cd16",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 235,
        "y": 480,
        "wires": [
            [
                "74e07da9f788883a"
            ]
        ],
        "l": false
    },
    {
        "id": "34a6870523baa74a",
        "type": "comment",
        "z": "65853bc12ed0cd16",
        "name": "CHECK MQTT Config NODE",
        "info": "\nTo run playback disable the MQTT config node so plyback and the MQTT values aren't both actvie",
        "x": 120,
        "y": 440,
        "wires": []
    },
    {
        "id": "c801c95728db443e",
        "type": "link in",
        "z": "65853bc12ed0cd16",
        "name": "6 Values from Color",
        "links": [
            "80eab88cb39a6595"
        ],
        "x": 630,
        "y": 800,
        "wires": [
            [
                "c6ff6dfa8660daa1"
            ]
        ],
        "l": true
    },
    {
        "id": "dcc1c1e31136c88e",
        "type": "debug",
        "z": "65853bc12ed0cd16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1490,
        "y": 920,
        "wires": []
    },
    {
        "id": "6539664ab2acd607",
        "type": "delay",
        "z": "65853bc12ed0cd16",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 620,
        "wires": [
            [
                "a3f9c002d0159d16"
            ]
        ]
    },
    {
        "id": "f3f4d99b7a0b4e62",
        "type": "mqtt in",
        "z": "65853bc12ed0cd16",
        "name": "",
        "topic": "heater/command",
        "qos": "0",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 80,
        "wires": [
            [
                "c6ff6dfa8660daa1",
                "ca95fa67badc3b05",
                "daf7da322df33e8c",
                "38abb77b3a0d39fe"
            ]
        ]
    },
    {
        "id": "daf7da322df33e8c",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 3,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "Command",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "12",
        "colors": [
            "#8caafa",
            "#c2f410",
            "#ca3838"
        ],
        "seg1": "6",
        "seg2": "12",
        "className": "",
        "x": 770,
        "y": 80,
        "wires": []
    },
    {
        "id": "422fe8ad66a33048",
        "type": "debug",
        "z": "65853bc12ed0cd16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1510,
        "y": 800,
        "wires": []
    },
    {
        "id": "6e6d01e8c9815372",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 6,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "Ave T",
        "label": "degF",
        "format": "{{value}}",
        "min": 0,
        "max": "600",
        "colors": [
            "#8caafa",
            "#008c00",
            "#ca3838"
        ],
        "seg1": "300",
        "seg2": "500",
        "className": "",
        "x": 810,
        "y": 460,
        "wires": []
    },
    {
        "id": "c2630468ad508dbf",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 6,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "Delta T",
        "label": "degF",
        "format": "{{value}}",
        "min": 0,
        "max": "200",
        "colors": [
            "#8caafa",
            "#008c00",
            "#ca3838"
        ],
        "seg1": "50",
        "seg2": "150",
        "className": "",
        "x": 1080,
        "y": 540,
        "wires": []
    },
    {
        "id": "2b60b752f58e7423",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "Delta T",
        "func": "const time =new Date().toISOString().\n                    replace(/T/, ' ').      // replace T with a space\n                    replace(/\\..+/, '');     // delete the dot and everything after\n\nconst newMsg = { \n     'payload': ( msg.payload['bbq/temperature/1 lpf'] - msg.payload['Ave of Internal Temperatures'] )\n    ,'topic': \"Delta T (Inlet-Ave)\"\n    ,'time': time\n    ,'debug': {\n         \"T1\":msg.payload['bbq/temperature/1 lpf'] \n        ,\"Ave\":msg.payload['Ave of Internal Temperatures'] \n    }\n    \n}\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 540,
        "wires": [
            [
                "c2630468ad508dbf"
            ]
        ]
    },
    {
        "id": "03d49ced8fde7398",
        "type": "join",
        "z": "65853bc12ed0cd16",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 815,
        "y": 540,
        "wires": [
            [
                "2b60b752f58e7423"
            ]
        ],
        "l": false
    },
    {
        "id": "a3f9c002d0159d16",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "RoR Calc (degF/m)",
        "func": "const produceAndAdd = (arr1 = [], arr2 = []) => {\n   let sum = 0;\n   for(let i=0; i < arr1.length; i++) {\n      const product = (arr1[i] * arr2[i]);\n      sum += product;\n   }\n   return sum;\n};\n\nvar newMsg = {};\n\ntimeNow = (new Date(msg.time)).getTime();\ntimeLast= context.get('timeLast');\n//dt = (timeNow - timeLast)/10000000.0;\ndt = (timeNow - timeLast)/1000.0;\ncontext.set('timeLast', timeNow);\n\nvar data= context.get('data');\ndata.unshift(parseFloat(msg.payload));\ndata.pop();\ncontext.set('data', data);\n\nif(!isNaN(dt) && dt > 0.0 ){\n    const c = [1,8,27,48,42,0,-42,-48,-27,-8,-1];\n    rorSum = produceAndAdd(data,c);\n    ror = 1/512*1/dt*rorSum*60;\n    newMsg = { \n         'payload':ror          \n        ,'topic': \"RoR2\"\n        ,'time': msg.time\n    }\n\n}\n\nnewMsg.debug = {\n    'timeNow':timeNow\n    ,'timeLast' :timeLast\n    ,'data':data\n    ,'dt':dt\n    ,'ror':ror\n}\n\nreturn newMsg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nvar data = Array(11).fill(-1);\ncontext.set('data',data);\ncontext.set('timeLast',(new Date()).getTime());",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 620,
        "wires": [
            [
                "ca5e768d574ad134",
                "c6ff6dfa8660daa1",
                "c060bc794dbb8bd4"
            ]
        ]
    },
    {
        "id": "c060bc794dbb8bd4",
        "type": "debug",
        "z": "65853bc12ed0cd16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 740,
        "wires": []
    },
    {
        "id": "dcb2bc45dfe3fc7f",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "RoR Forward finite difference calc  (degF/m)",
        "func": "// https://en.wikipedia.org/wiki/Finite_difference_coefficient#Backward_finite_difference\n\nconst produceAndAdd = (arr1 = [], arr2 = []) => {\n   let sum = 0;\n   for(let i=0; i < arr1.length; i++) {\n      const product = (arr1[i] * arr2[i]);\n      sum += product;\n   }\n   return sum;\n};\n\nvar newMsg = {};\n\ntimeNow = (new Date(msg.time)).getTime();\ntimeLast= context.get('timeLast');\ndt = (timeNow - timeLast)/1000.0; //Delta Time in seconds\ncontext.set('timeLast', timeNow);\n\n\nvar data= context.get('data');\ndata.unshift(parseFloat(msg.payload));\ndata.pop();\ncontext.set('data', data);\n\n// (25/12,4,3,4/3,1/4) 2.083,4,-3,1.333,-0.25\n\nif(!isNaN(dt) && dt > 0.0 ){\n    const c = [-2.083,4,-3,1.333,-0.25];\n    rorSum = produceAndAdd(data,c);\n    ror = 1/dt*rorSum*60;\n    newMsg = { \n         'payload':ror          \n        ,'topic': \"RoR2\"\n        ,'time': msg.time\n    }\n\n}\n\nnewMsg.debug = {\n    'timeNow':timeNow\n    ,'timeLast' :timeLast\n    ,'data':data\n    ,'dt':dt\n    ,'ror':ror\n}\n\nreturn newMsg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nvar data = Array(5).fill(-1);\ncontext.set('data',data);\ncontext.set('timeLast',(new Date()).getTime());",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "cd8380b9b08eb888",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "RoR Calc 10 (degF/m)",
        "func": "const produceAndAdd = (arr1 = [], arr2 = []) => {\n   let sum = 0;\n   for(let i=0; i < arr1.length; i++) {\n      const product = (arr1[i] * arr2[i]);\n      sum += product;\n   }\n   return sum;\n};\n\nvar newMsg = {};\n\ntimeNow = (new Date(msg.time)).getTime();\ntimeLast= context.get('timeLast');\n//dt = (timeNow - timeLast)/10000000.0;\ndt = (timeNow - timeLast)/1000.0;\ncontext.set('timeLast', timeNow);\n\nvar data= context.get('data');\ndata.unshift(parseFloat(msg.payload));\ndata.pop();\ncontext.set('data', data);\n\nif(!isNaN(dt) && dt > 0.0 ){\n    const c = [1,8,27,48,42,0,-42,-48,-27,-8,-1];\n    rorSum = produceAndAdd(data,c);\n    ror = 1/512*1/dt*rorSum*60;\n    newMsg = { \n         'payload':ror          \n        ,'topic': \"RoR2\"\n        ,'time': msg.time\n    }\n\n}\n\nnewMsg.debug = {\n    'timeNow':timeNow\n    ,'timeLast' :timeLast\n    ,'data':data\n    ,'dt':dt\n    ,'ror':ror\n}\n\nreturn newMsg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nvar data = Array(11).fill(-1);\ncontext.set('data',data);\ncontext.set('timeLast',(new Date()).getTime());",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "01c128b2a22d5a7f",
        "type": "function",
        "z": "65853bc12ed0cd16",
        "name": "RoR Forward finite difference calc7  (degF/m)",
        "func": "// https://web.media.mit.edu/~crtaylor/calculator.html\n// Locations of Sampled Points: -6,-5,-4,-3,-2,-1,0\n// Derivitive Order: 1\n// f_x = (10*f[i-6]-72*f[i-5]+225*f[i-4]-400*f[i-3]+450*f[i-2]-360*f[i-1]+147*f[i+0])/(60*1.0*h**1)\n\n// https://en.wikipedia.org/wiki/Finite_difference_coefficient#Backward_finite_difference\n\nconst produceAndAdd = (arr1 = [], arr2 = []) => {\n   let sum = 0;\n   for(let i=0; i < arr1.length; i++) {\n      const product = (arr1[i] * arr2[i]);\n      sum += product;\n   }\n   return sum;\n};\n\nvar newMsg = {};\n\ntimeNow = (new Date(msg.time)).getTime();\ntimeLast= context.get('timeLast');\ndt = (timeNow - timeLast)/1000.0; //Delta Time in seconds\ncontext.set('timeLast', timeNow);\n\n\nvar data= context.get('data');\ndata.unshift(parseFloat(msg.payload));\ndata.pop();\ncontext.set('data', data);\n\n//f_x = (10*f[i-6]-72*f[i-5]+225*f[i-4]-400*f[i-3]+450*f[i-2]-360*f[i-1]+147*f[i+0])/(60*1.0*h**1)\n//10,-72,225,-400,450,-360,147 **rev ordered 1/60 so..\n//147,-360,450,-400,225,-72,10  1/60\n\nif(!isNaN(dt) && dt > 0.0 ){\n    const c = [147,-360,450,-400,225,-72,10];\n    rorSum = produceAndAdd(data,c);\n    ror = 1/dt*rorSum; //1/60*60 to get seconds so dropped the 1/60 \n    newMsg = { \n         'payload':ror          \n        ,'topic': \"RoR2\"\n        ,'time': msg.time\n    }\n\n}\n\nnewMsg.debug = {\n    'timeNow':timeNow\n    ,'timeLast' :timeLast\n    ,'data':data\n    ,'dt':dt\n    ,'ror':ror\n}\n\nreturn newMsg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nvar data = Array(7).fill(-1);\ncontext.set('data',data);\ncontext.set('timeLast',(new Date()).getTime());",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "38abb77b3a0d39fe",
        "type": "debug",
        "z": "65853bc12ed0cd16",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 40,
        "wires": []
    },
    {
        "id": "e77c2d1fb88af06b",
        "type": "mqtt in",
        "z": "65853bc12ed0cd16",
        "name": "",
        "topic": "irtemp/object",
        "qos": "0",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 510,
        "y": 940,
        "wires": [
            [
                "198eaff3f636f688",
                "c6ff6dfa8660daa1"
            ]
        ]
    },
    {
        "id": "198eaff3f636f688",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 3,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "IR Temp Object",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "800",
        "colors": [
            "#8caafa",
            "#c2f410",
            "#ca3838"
        ],
        "seg1": "200",
        "seg2": "500",
        "className": "",
        "x": 820,
        "y": 940,
        "wires": []
    },
    {
        "id": "5fc3da0061b384ad",
        "type": "mqtt in",
        "z": "65853bc12ed0cd16",
        "name": "",
        "topic": "irtemp/ambient",
        "qos": "0",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 520,
        "y": 1000,
        "wires": [
            [
                "b975ad2f43178475",
                "c6ff6dfa8660daa1"
            ]
        ]
    },
    {
        "id": "b975ad2f43178475",
        "type": "ui_gauge",
        "z": "65853bc12ed0cd16",
        "name": "",
        "group": "495ea1bbb22348c8",
        "order": 3,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "IR Temp Ambient",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "130",
        "colors": [
            "#8caafa",
            "#c2f410",
            "#ca3838"
        ],
        "seg1": "40",
        "seg2": "50",
        "className": "",
        "x": 830,
        "y": 1000,
        "wires": []
    },
    {
        "id": "9dff2c2e.66ea1",
        "type": "http response",
        "z": "9ee26a7af4143d61",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 330,
        "y": 340,
        "wires": []
    },
    {
        "id": "68e0a720.f29498",
        "type": "ui_template",
        "z": "9ee26a7af4143d61",
        "group": "495ea1bbb22348c8",
        "name": "Display image",
        "order": 8,
        "width": "6",
        "height": "4",
        "format": "<img width=\"16\" height=\"16\" src=\"data:image/jpeg;base64,{{msg.payload}}\" />\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 820,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "2fb71bea.a5d1e4",
        "type": "http in",
        "z": "9ee26a7af4143d61",
        "name": "",
        "url": "IMAGE",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 150,
        "y": 280,
        "wires": [
            [
                "9dff2c2e.66ea1",
                "a87b8d6.a9b0c7",
                "f3bd42a4ad657a65"
            ]
        ]
    },
    {
        "id": "a87b8d6.a9b0c7",
        "type": "change",
        "z": "9ee26a7af4143d61",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "req.files[0].buffer",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 280,
        "wires": [
            [
                "4bcddbb.38c2624"
            ]
        ]
    },
    {
        "id": "4bcddbb.38c2624",
        "type": "base64",
        "z": "9ee26a7af4143d61",
        "name": "Encode",
        "x": 580,
        "y": 280,
        "wires": [
            [
                "68e0a720.f29498",
                "6f49c07aa476a368",
                "3a22dd16b02ba394"
            ]
        ]
    },
    {
        "id": "f3bd42a4ad657a65",
        "type": "debug",
        "z": "9ee26a7af4143d61",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 340,
        "y": 220,
        "wires": []
    },
    {
        "id": "6f49c07aa476a368",
        "type": "image viewer",
        "z": "9ee26a7af4143d61",
        "name": "",
        "width": "480",
        "data": "payload",
        "dataType": "msg",
        "active": true,
        "x": 750,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "239224164c193526",
        "type": "mqtt in",
        "z": "9ee26a7af4143d61",
        "name": "",
        "topic": "coffee/image/timestamp",
        "qos": "2",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 200,
        "y": 920,
        "wires": [
            [
                "0daa095f4c32afb8"
            ]
        ]
    },
    {
        "id": "0daa095f4c32afb8",
        "type": "debug",
        "z": "9ee26a7af4143d61",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 550,
        "y": 900,
        "wires": []
    },
    {
        "id": "6f115a121b5b206c",
        "type": "mqtt in",
        "z": "9ee26a7af4143d61",
        "name": "",
        "topic": "coffee/image/filename",
        "qos": "2",
        "datatype": "auto",
        "broker": "d2d2d66e3cef1cdd",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 200,
        "y": 980,
        "wires": [
            [
                "0daa095f4c32afb8"
            ]
        ]
    },
    {
        "id": "72fabc9b6b98323f",
        "type": "function",
        "z": "9ee26a7af4143d61",
        "name": "",
        "func": "//TODO: assert payload is image\nmsg.payload.background(0xFFFFFFFF);\nmask=context.get(\"mask\");\n// Mask uses average to set the alpha so white -> 0 and black ->1\n// https://github.com/oliver-moran/jimp/blob/master/packages/plugin-mask/src/index.js\nmsg.payload.mask(mask).crop(220,235,(545-220),(450-235))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n// See https://www.npmjs.com/package/jimp for more about jimp\nconst mask = await jimp.read('/data/mask.jpg')\ncontext.set(\"mask\",mask);",
        "finalize": "",
        "libs": [
            {
                "var": "jimp",
                "module": "jimp"
            }
        ],
        "x": 940,
        "y": 280,
        "wires": [
            [
                "3df465a52e80d73a",
                "a18c438395c90aaf"
            ]
        ]
    },
    {
        "id": "3df465a52e80d73a",
        "type": "image viewer",
        "z": "9ee26a7af4143d61",
        "name": "",
        "width": "480",
        "data": "payload",
        "dataType": "msg",
        "active": true,
        "x": 1490,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "a18c438395c90aaf",
        "type": "function",
        "z": "9ee26a7af4143d61",
        "name": "ImgAveRGB",
        "func": "//https://flows.nodered.org/flow/1a867a5280c2cd5a2304ca8db567ec64\n//Built from above sync example\n//\n\nlet rgb = [0,0,0]\nlet count = 0\nlet image = msg.payload;\nfor(let y = 0; y < image.bitmap.height; y++){    \n    for(let x = 0; x < image.bitmap.width; x++){\n        let color = image.getPixelColor(x, y) ;\n//        var r = (color >> 24) & 255; \n//        var g = (color >> 16) & 255; \n//        var b = (color >> 8) & 255;\n//        debugger\n        let idx=x*y\n        var a = image.bitmap.data[idx + 3];\n        if(a == 0xFF){\n            var r = image.bitmap.data[idx + 0];\n            var g = image.bitmap.data[idx + 1];\n            var b = image.bitmap.data[idx + 2];\n            rgb[0]+=r;\n            rgb[1]+=g;\n            rgb[2]+=b;\n            count++;\n        }\n    }\n}\nrgb=rgb.map(v => v/count);\n\nmsg.image = msg.payload;\nmsg.payload = \n    {\n        r: rgb[0],\n        g: rgb[1],\n        b: rgb[2]\n    }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 280,
        "wires": [
            [
                "5d431c3d43c2578e",
                "ad08385123451b3e"
            ]
        ]
    },
    {
        "id": "5d431c3d43c2578e",
        "type": "function",
        "z": "9ee26a7af4143d61",
        "name": "RGBtoHSV",
        "func": "//https://stackoverflow.com/questions/8022885/rgb-to-hsv-color-in-javascript\n\nfunction rgb2hsv (r, g, b) {\n    let rabs, gabs, babs, rr, gg, bb, h, s, v, diff, diffc, percentRoundFn;\n    rabs = r / 255;\n    gabs = g / 255;\n    babs = b / 255;\n    v = Math.max(rabs, gabs, babs),\n    diff = v - Math.min(rabs, gabs, babs);\n    diffc = c => (v - c) / 6 / diff + 1 / 2;\n    percentRoundFn = num => Math.round(num * 100) / 100;\n    if (diff == 0) {\n        h = s = 0;\n    } else {\n        s = diff / v;\n        rr = diffc(rabs);\n        gg = diffc(gabs);\n        bb = diffc(babs);\n\n        if (rabs === v) {\n            h = bb - gg;\n        } else if (gabs === v) {\n            h = (1 / 3) + rr - bb;\n        } else if (babs === v) {\n            h = (2 / 3) + gg - rr;\n        }\n        if (h < 0) {\n            h += 1;\n        }else if (h > 1) {\n            h -= 1;\n        }\n    }\n    return {\n        h: Math.round(h * 360),\n        s: percentRoundFn(s * 100),\n        v: percentRoundFn(v * 100)\n    };\n}\nlet hsv=[]\nmsg.payload = rgb2hsv(msg.payload['r'],msg.payload['g'],msg.payload['b']);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1370,
        "y": 340,
        "wires": [
            [
                "76a55068a5c8fb46"
            ]
        ]
    },
    {
        "id": "ae715978b932497a",
        "type": "ui_chart",
        "z": "9ee26a7af4143d61",
        "name": "RGB Chart",
        "group": "3510553dfa52672e",
        "order": 1,
        "width": "12",
        "height": "8",
        "label": "Color",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#ff0000",
            "#00ff00",
            "#0000ff",
            "#945fb9",
            "#cfcfcf",
            "#000000",
            "#ff9896",
            "#9467bd",
            "#9463bb"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1750,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "3a22dd16b02ba394",
        "type": "jimp-image",
        "z": "9ee26a7af4143d61",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "4294967295",
        "parameter1Type": "num",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 770,
        "y": 280,
        "wires": [
            [
                "72fabc9b6b98323f"
            ]
        ]
    },
    {
        "id": "ad08385123451b3e",
        "type": "split",
        "z": "9ee26a7af4143d61",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 1570,
        "y": 280,
        "wires": [
            [
                "ae715978b932497a",
                "80eab88cb39a6595"
            ]
        ]
    },
    {
        "id": "80eab88cb39a6595",
        "type": "link out",
        "z": "9ee26a7af4143d61",
        "name": "Save Values",
        "mode": "link",
        "links": [
            "c801c95728db443e"
        ],
        "x": 1705,
        "y": 240,
        "wires": []
    },
    {
        "id": "552504f0c470293a",
        "type": "ui_chart",
        "z": "9ee26a7af4143d61",
        "name": "HSV Chart",
        "group": "3510553dfa52672e",
        "order": 2,
        "width": "12",
        "height": "8",
        "label": "Color",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#ff0000",
            "#00ff00",
            "#0000ff",
            "#945fb9",
            "#cfcfcf",
            "#000000",
            "#ff9896",
            "#9467bd",
            "#9463bb"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1750,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "76a55068a5c8fb46",
        "type": "split",
        "z": "9ee26a7af4143d61",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 1570,
        "y": 340,
        "wires": [
            [
                "552504f0c470293a",
                "80eab88cb39a6595"
            ]
        ]
    },
    {
        "id": "932682a8b2d078f1",
        "type": "inject",
        "z": "9ee26a7af4143d61",
        "name": "resetChart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "resetChart",
        "payload": "[]",
        "payloadType": "jsonata",
        "x": 1500,
        "y": 160,
        "wires": [
            [
                "ae715978b932497a",
                "552504f0c470293a"
            ]
        ]
    },
    {
        "id": "bf892437.de0b78",
        "type": "jimp-image",
        "z": "78e8048a75698e3b",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "img.bmp",
        "parameter1Type": "str",
        "parameter2": "",
        "parameter2Type": "num",
        "parameter3": "",
        "parameter3Type": "num",
        "parameter4": "",
        "parameter4Type": "none",
        "parameter5": "",
        "parameter5Type": "none",
        "parameter6": "",
        "parameter6Type": "none",
        "parameter7": "",
        "parameter7Type": "none",
        "parameter8": "",
        "parameter8Type": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 390,
        "y": 260,
        "wires": [
            [
                "fd49e51.34c2618",
                "729c403b.7dd12"
            ]
        ]
    },
    {
        "id": "d0aa7f27.a3505",
        "type": "inject",
        "z": "78e8048a75698e3b",
        "name": "16x16 pokeball",
        "props": [
            {
                "p": "payload",
                "v": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACCSURBVDhPrZAJDoAwCAR5Ok/rz6pFFxekxmuTMS3HNFF6EREpqRKqPjihEvntajHDEjuNgtLAHSCx7yfBm2Uwdv8TVBLUZw+4gCUMelWfeqtt+xmPoJ2jkMODOdizjl8eYrsQqKrRWnPyMCcIRliSRRkWBjVeYxGDPife9mAwc07vCzBBNxZvGWrwAAAAAElFTkSuQmCC",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "pokeball",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "pokeball",
        "payload": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACCSURBVDhPrZAJDoAwCAR5Ok/rz6pFFxekxmuTMS3HNFF6EREpqRKqPjihEvntajHDEjuNgtLAHSCx7yfBm2Uwdv8TVBLUZw+4gCUMelWfeqtt+xmPoJ2jkMODOdizjl8eYrsQqKrRWnPyMCcIRliSRRkWBjVeYxGDPife9mAwc07vCzBBNxZvGWrwAAAAAElFTkSuQmCC",
        "payloadType": "str",
        "x": 240,
        "y": 260,
        "wires": [
            [
                "bf892437.de0b78"
            ]
        ]
    },
    {
        "id": "f75cb931.084e48",
        "type": "debug",
        "z": "78e8048a75698e3b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 910,
        "y": 320,
        "wires": []
    },
    {
        "id": "fd49e51.34c2618",
        "type": "function",
        "z": "78e8048a75698e3b",
        "name": "getRBG from Pixels (sync)",
        "func": "let rgb = [0,0,0]\nlet count = 0\nlet image = msg.payload;\nfor(let y = 0; y < image.bitmap.height; y++){    \n    for(let x = 0; x < image.bitmap.width; x++){\n        let color = image.getPixelColor(x, y) ;\n//        var r = (color >> 24) & 255; \n//        var g = (color >> 16) & 255; \n//        var b = (color >> 8) & 255;\n//        debugger\n        let idx=x*y\n        var a = image.bitmap.data[idx + 3];\n        if(a == 0xFF){\n            var r = image.bitmap.data[idx + 0];\n            var g = image.bitmap.data[idx + 1];\n            var b = image.bitmap.data[idx + 2];\n            rgb[0]+=r;\n            rgb[1]+=g;\n            rgb[2]+=b;\n            count++;\n        }\n    }\n}\n\nmsg.rgb = rgb.map(v => v/count);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 320,
        "wires": [
            [
                "6030df32.10d74"
            ]
        ]
    },
    {
        "id": "6030df32.10d74",
        "type": "image viewer",
        "z": "78e8048a75698e3b",
        "name": "",
        "width": "64",
        "data": "payload",
        "dataType": "msg",
        "active": true,
        "x": 790,
        "y": 320,
        "wires": [
            [
                "f75cb931.084e48"
            ]
        ]
    },
    {
        "id": "729c403b.7dd12",
        "type": "function",
        "z": "78e8048a75698e3b",
        "name": "getRBG from Pixels (async)",
        "func": "\nvar image = msg.payload;\nvar rgb = [];\nimage.scan(0, 0, image.bitmap.width, image.bitmap.height, function(x, y, idx) {\n    // x, y is the position of this pixel on the image\n    // idx is the position start position of this rgba tuple in the bitmap Buffer\n    \n    var r = this.bitmap.data[idx + 0];\n    var g = this.bitmap.data[idx + 1];\n    var b = this.bitmap.data[idx + 2];\n    var a = this.bitmap.data[idx + 3];\n    rgb.push(r);\n    rgb.push(g);\n    rgb.push(b); \n    if (x >= image.bitmap.width - 1 && y >= image.bitmap.height - 1) {\n        // image scan finished, do your stuff\n        node.send({topic:\"rgb\",payload: rgb})\n    }\n});\n",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 200,
        "wires": [
            [
                "4fefbcbb.366634"
            ]
        ]
    },
    {
        "id": "4fefbcbb.366634",
        "type": "debug",
        "z": "78e8048a75698e3b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 910,
        "y": 200,
        "wires": []
    },
    {
        "id": "89714368.7bd14",
        "type": "comment",
        "z": "78e8048a75698e3b",
        "name": "To load a file chage the inject to send filename",
        "info": "",
        "x": 330,
        "y": 140,
        "wires": []
    },
    {
        "id": "813c108f.c3dc5",
        "type": "comment",
        "z": "78e8048a75698e3b",
        "name": "RGB Data will be in msg.payload",
        "info": "",
        "x": 990,
        "y": 240,
        "wires": []
    },
    {
        "id": "7da840ec.4c85d",
        "type": "comment",
        "z": "78e8048a75698e3b",
        "name": "RGB Data will be in msg.rgb",
        "info": "",
        "x": 980,
        "y": 360,
        "wires": []
    },
    {
        "id": "4d746420b2d7686d",
        "type": "http in",
        "z": "78e8048a75698e3b",
        "name": "",
        "url": "/simple",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 780,
        "wires": [
            [
                "5681bb3976e3822f"
            ]
        ]
    },
    {
        "id": "5681bb3976e3822f",
        "type": "template",
        "z": "78e8048a75698e3b",
        "name": "html",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<h1>Upload a file here:</h1>\n\n<form action=\"/upload\" method=\"POST\" enctype=\"multipart/form-data\">\n    <input type=\"file\" name=\"myFile\" />\n    <input type=\"submit\" value=\"Submit\">\n</form>",
        "output": "str",
        "x": 550,
        "y": 780,
        "wires": [
            [
                "756b5d791d611482"
            ]
        ]
    },
    {
        "id": "756b5d791d611482",
        "type": "http response",
        "z": "78e8048a75698e3b",
        "name": "",
        "x": 690,
        "y": 780,
        "wires": []
    },
    {
        "id": "b4a81a31b456bd52",
        "type": "http response",
        "z": "78e8048a75698e3b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 650,
        "y": 1000,
        "wires": []
    },
    {
        "id": "1ce078d3f088e398",
        "type": "comment",
        "z": "78e8048a75698e3b",
        "name": "Simple",
        "info": "",
        "x": 190,
        "y": 740,
        "wires": []
    },
    {
        "id": "cda48ab070ab366b",
        "type": "template",
        "z": "78e8048a75698e3b",
        "name": "dropzone.js",
        "field": "dropzonejs",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "\n/*\n *\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n *\n * Copyright (c) 2012, Matias Meno\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n */\n\n(function() {\n  var Dropzone, Emitter, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  noop = function() {};\n\n  Emitter = (function() {\n    function Emitter() {}\n\n    Emitter.prototype.addEventListener = Emitter.prototype.on;\n\n    Emitter.prototype.on = function(event, fn) {\n      this._callbacks = this._callbacks || {};\n      if (!this._callbacks[event]) {\n        this._callbacks[event] = [];\n      }\n      this._callbacks[event].push(fn);\n      return this;\n    };\n\n    Emitter.prototype.emit = function() {\n      var args, callback, callbacks, event, _i, _len;\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      this._callbacks = this._callbacks || {};\n      callbacks = this._callbacks[event];\n      if (callbacks) {\n        for (_i = 0, _len = callbacks.length; _i < _len; _i++) {\n          callback = callbacks[_i];\n          callback.apply(this, args);\n        }\n      }\n      return this;\n    };\n\n    Emitter.prototype.removeListener = Emitter.prototype.off;\n\n    Emitter.prototype.removeAllListeners = Emitter.prototype.off;\n\n    Emitter.prototype.removeEventListener = Emitter.prototype.off;\n\n    Emitter.prototype.off = function(event, fn) {\n      var callback, callbacks, i, _i, _len;\n      if (!this._callbacks || arguments.length === 0) {\n        this._callbacks = {};\n        return this;\n      }\n      callbacks = this._callbacks[event];\n      if (!callbacks) {\n        return this;\n      }\n      if (arguments.length === 1) {\n        delete this._callbacks[event];\n        return this;\n      }\n      for (i = _i = 0, _len = callbacks.length; _i < _len; i = ++_i) {\n        callback = callbacks[i];\n        if (callback === fn) {\n          callbacks.splice(i, 1);\n          break;\n        }\n      }\n      return this;\n    };\n\n    return Emitter;\n\n  })();\n\n  Dropzone = (function(_super) {\n    var extend, resolveOption;\n\n    __extends(Dropzone, _super);\n\n    Dropzone.prototype.Emitter = Emitter;\n\n\n    /*\n    This is a list of all available events you can register on a dropzone object.\n    \n    You can register an event handler like this:\n    \n        dropzone.on(\"dragEnter\", function() { });\n     */\n\n    Dropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n\n    Dropzone.prototype.defaultOptions = {\n      url: null,\n      method: \"post\",\n      withCredentials: false,\n      parallelUploads: 2,\n      uploadMultiple: false,\n      maxFilesize: 256,\n      paramName: \"file\",\n      createImageThumbnails: true,\n      maxThumbnailFilesize: 10,\n      thumbnailWidth: 120,\n      thumbnailHeight: 120,\n      filesizeBase: 1000,\n      maxFiles: null,\n      params: {},\n      clickable: true,\n      ignoreHiddenFiles: true,\n      acceptedFiles: null,\n      acceptedMimeTypes: null,\n      autoProcessQueue: true,\n      autoQueue: true,\n      addRemoveLinks: false,\n      previewsContainer: null,\n      hiddenInputContainer: \"body\",\n      capture: null,\n      renameFilename: null,\n      dictDefaultMessage: \"Drop files here to upload\",\n      dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n      dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n      dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n      dictInvalidFileType: \"You can't upload files of this type.\",\n      dictResponseError: \"Server responded with {{statusCode}} code.\",\n      dictCancelUpload: \"Cancel upload\",\n      dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n      dictRemoveFile: \"Remove file\",\n      dictRemoveFileConfirmation: null,\n      dictMaxFilesExceeded: \"You can not upload any more files.\",\n      accept: function(file, done) {\n        return done();\n      },\n      init: function() {\n        return noop;\n      },\n      forceFallback: false,\n      fallback: function() {\n        var child, messageElement, span, _i, _len, _ref;\n        this.element.className = \"\" + this.element.className + \" dz-browser-not-supported\";\n        _ref = this.element.getElementsByTagName(\"div\");\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          child = _ref[_i];\n          if (/(^| )dz-message($| )/.test(child.className)) {\n            messageElement = child;\n            child.className = \"dz-message\";\n            continue;\n          }\n        }\n        if (!messageElement) {\n          messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\n          this.element.appendChild(messageElement);\n        }\n        span = messageElement.getElementsByTagName(\"span\")[0];\n        if (span) {\n          if (span.textContent != null) {\n            span.textContent = this.options.dictFallbackMessage;\n          } else if (span.innerText != null) {\n            span.innerText = this.options.dictFallbackMessage;\n          }\n        }\n        return this.element.appendChild(this.getFallbackForm());\n      },\n      resize: function(file) {\n        var info, srcRatio, trgRatio;\n        info = {\n          srcX: 0,\n          srcY: 0,\n          srcWidth: file.width,\n          srcHeight: file.height\n        };\n        srcRatio = file.width / file.height;\n        info.optWidth = this.options.thumbnailWidth;\n        info.optHeight = this.options.thumbnailHeight;\n        if ((info.optWidth == null) && (info.optHeight == null)) {\n          info.optWidth = info.srcWidth;\n          info.optHeight = info.srcHeight;\n        } else if (info.optWidth == null) {\n          info.optWidth = srcRatio * info.optHeight;\n        } else if (info.optHeight == null) {\n          info.optHeight = (1 / srcRatio) * info.optWidth;\n        }\n        trgRatio = info.optWidth / info.optHeight;\n        if (file.height < info.optHeight || file.width < info.optWidth) {\n          info.trgHeight = info.srcHeight;\n          info.trgWidth = info.srcWidth;\n        } else {\n          if (srcRatio > trgRatio) {\n            info.srcHeight = file.height;\n            info.srcWidth = info.srcHeight * trgRatio;\n          } else {\n            info.srcWidth = file.width;\n            info.srcHeight = info.srcWidth / trgRatio;\n          }\n        }\n        info.srcX = (file.width - info.srcWidth) / 2;\n        info.srcY = (file.height - info.srcHeight) / 2;\n        return info;\n      },\n\n      /*\n      Those functions register themselves to the events on init and handle all\n      the user interface specific stuff. Overwriting them won't break the upload\n      but can break the way it's displayed.\n      You can overwrite them if you don't like the default behavior. If you just\n      want to add an additional event handler, register it on the dropzone object\n      and don't overwrite those options.\n       */\n      drop: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragstart: noop,\n      dragend: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragenter: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragover: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragleave: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      paste: noop,\n      reset: function() {\n        return this.element.classList.remove(\"dz-started\");\n      },\n      addedfile: function(file) {\n        var node, removeFileEvent, removeLink, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n        if (this.element === this.previewsContainer) {\n          this.element.classList.add(\"dz-started\");\n        }\n        if (this.previewsContainer) {\n          file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n          file.previewTemplate = file.previewElement;\n          this.previewsContainer.appendChild(file.previewElement);\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-name]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            node.textContent = this._renameFilename(file.name);\n          }\n          _ref1 = file.previewElement.querySelectorAll(\"[data-dz-size]\");\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            node = _ref1[_j];\n            node.innerHTML = this.filesize(file.size);\n          }\n          if (this.options.addRemoveLinks) {\n            file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\n            file.previewElement.appendChild(file._removeLink);\n          }\n          removeFileEvent = (function(_this) {\n            return function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              if (file.status === Dropzone.UPLOADING) {\n                return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {\n                  return _this.removeFile(file);\n                });\n              } else {\n                if (_this.options.dictRemoveFileConfirmation) {\n                  return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {\n                    return _this.removeFile(file);\n                  });\n                } else {\n                  return _this.removeFile(file);\n                }\n              }\n            };\n          })(this);\n          _ref2 = file.previewElement.querySelectorAll(\"[data-dz-remove]\");\n          _results = [];\n          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n            removeLink = _ref2[_k];\n            _results.push(removeLink.addEventListener(\"click\", removeFileEvent));\n          }\n          return _results;\n        }\n      },\n      removedfile: function(file) {\n        var _ref;\n        if (file.previewElement) {\n          if ((_ref = file.previewElement) != null) {\n            _ref.parentNode.removeChild(file.previewElement);\n          }\n        }\n        return this._updateMaxFilesReachedClass();\n      },\n      thumbnail: function(file, dataUrl) {\n        var thumbnailElement, _i, _len, _ref;\n        if (file.previewElement) {\n          file.previewElement.classList.remove(\"dz-file-preview\");\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            thumbnailElement = _ref[_i];\n            thumbnailElement.alt = file.name;\n            thumbnailElement.src = dataUrl;\n          }\n          return setTimeout(((function(_this) {\n            return function() {\n              return file.previewElement.classList.add(\"dz-image-preview\");\n            };\n          })(this)), 1);\n        }\n      },\n      error: function(file, message) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-error\");\n          if (typeof message !== \"String\" && message.error) {\n            message = message.error;\n          }\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            _results.push(node.textContent = message);\n          }\n          return _results;\n        }\n      },\n      errormultiple: noop,\n      processing: function(file) {\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-processing\");\n          if (file._removeLink) {\n            return file._removeLink.textContent = this.options.dictCancelUpload;\n          }\n        }\n      },\n      processingmultiple: noop,\n      uploadprogress: function(file, progress, bytesSent) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            if (node.nodeName === 'PROGRESS') {\n              _results.push(node.value = progress);\n            } else {\n              _results.push(node.style.width = \"\" + progress + \"%\");\n            }\n          }\n          return _results;\n        }\n      },\n      totaluploadprogress: noop,\n      sending: noop,\n      sendingmultiple: noop,\n      success: function(file) {\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-success\");\n        }\n      },\n      successmultiple: noop,\n      canceled: function(file) {\n        return this.emit(\"error\", file, \"Upload canceled.\");\n      },\n      canceledmultiple: noop,\n      complete: function(file) {\n        if (file._removeLink) {\n          file._removeLink.textContent = this.options.dictRemoveFile;\n        }\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-complete\");\n        }\n      },\n      completemultiple: noop,\n      maxfilesexceeded: noop,\n      maxfilesreached: noop,\n      queuecomplete: noop,\n      addedfiles: noop,\n      previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\"\n    };\n\n    extend = function() {\n      var key, object, objects, target, val, _i, _len;\n      target = arguments[0], objects = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      for (_i = 0, _len = objects.length; _i < _len; _i++) {\n        object = objects[_i];\n        for (key in object) {\n          val = object[key];\n          target[key] = val;\n        }\n      }\n      return target;\n    };\n\n    function Dropzone(element, options) {\n      var elementOptions, fallback, _ref;\n      this.element = element;\n      this.version = Dropzone.version;\n      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n      this.clickableElements = [];\n      this.listeners = [];\n      this.files = [];\n      if (typeof this.element === \"string\") {\n        this.element = document.querySelector(this.element);\n      }\n      if (!(this.element && (this.element.nodeType != null))) {\n        throw new Error(\"Invalid dropzone element.\");\n      }\n      if (this.element.dropzone) {\n        throw new Error(\"Dropzone already attached.\");\n      }\n      Dropzone.instances.push(this);\n      this.element.dropzone = this;\n      elementOptions = (_ref = Dropzone.optionsForElement(this.element)) != null ? _ref : {};\n      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\n      if (this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n        return this.options.fallback.call(this);\n      }\n      if (this.options.url == null) {\n        this.options.url = this.element.getAttribute(\"action\");\n      }\n      if (!this.options.url) {\n        throw new Error(\"No URL provided.\");\n      }\n      if (this.options.acceptedFiles && this.options.acceptedMimeTypes) {\n        throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n      }\n      if (this.options.acceptedMimeTypes) {\n        this.options.acceptedFiles = this.options.acceptedMimeTypes;\n        delete this.options.acceptedMimeTypes;\n      }\n      this.options.method = this.options.method.toUpperCase();\n      if ((fallback = this.getExistingFallback()) && fallback.parentNode) {\n        fallback.parentNode.removeChild(fallback);\n      }\n      if (this.options.previewsContainer !== false) {\n        if (this.options.previewsContainer) {\n          this.previewsContainer = Dropzone.getElement(this.options.previewsContainer, \"previewsContainer\");\n        } else {\n          this.previewsContainer = this.element;\n        }\n      }\n      if (this.options.clickable) {\n        if (this.options.clickable === true) {\n          this.clickableElements = [this.element];\n        } else {\n          this.clickableElements = Dropzone.getElements(this.options.clickable, \"clickable\");\n        }\n      }\n      this.init();\n    }\n\n    Dropzone.prototype.getAcceptedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getRejectedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (!file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getFilesWithStatus = function(status) {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === status) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getQueuedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.QUEUED);\n    };\n\n    Dropzone.prototype.getUploadingFiles = function() {\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\n    };\n\n    Dropzone.prototype.getAddedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.ADDED);\n    };\n\n    Dropzone.prototype.getActiveFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.init = function() {\n      var eventName, noPropagation, setupHiddenFileInput, _i, _len, _ref, _ref1;\n      if (this.element.tagName === \"form\") {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n      }\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\n      }\n      if (this.clickableElements.length) {\n        setupHiddenFileInput = (function(_this) {\n          return function() {\n            if (_this.hiddenFileInput) {\n              _this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);\n            }\n            _this.hiddenFileInput = document.createElement(\"input\");\n            _this.hiddenFileInput.setAttribute(\"type\", \"file\");\n            if ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {\n              _this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n            }\n            _this.hiddenFileInput.className = \"dz-hidden-input\";\n            if (_this.options.acceptedFiles != null) {\n              _this.hiddenFileInput.setAttribute(\"accept\", _this.options.acceptedFiles);\n            }\n            if (_this.options.capture != null) {\n              _this.hiddenFileInput.setAttribute(\"capture\", _this.options.capture);\n            }\n            _this.hiddenFileInput.style.visibility = \"hidden\";\n            _this.hiddenFileInput.style.position = \"absolute\";\n            _this.hiddenFileInput.style.top = \"0\";\n            _this.hiddenFileInput.style.left = \"0\";\n            _this.hiddenFileInput.style.height = \"0\";\n            _this.hiddenFileInput.style.width = \"0\";\n            document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);\n            return _this.hiddenFileInput.addEventListener(\"change\", function() {\n              var file, files, _i, _len;\n              files = _this.hiddenFileInput.files;\n              if (files.length) {\n                for (_i = 0, _len = files.length; _i < _len; _i++) {\n                  file = files[_i];\n                  _this.addFile(file);\n                }\n              }\n              _this.emit(\"addedfiles\", files);\n              return setupHiddenFileInput();\n            });\n          };\n        })(this);\n        setupHiddenFileInput();\n      }\n      this.URL = (_ref = window.URL) != null ? _ref : window.webkitURL;\n      _ref1 = this.events;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        eventName = _ref1[_i];\n        this.on(eventName, this.options[eventName]);\n      }\n      this.on(\"uploadprogress\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"removedfile\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"canceled\", (function(_this) {\n        return function(file) {\n          return _this.emit(\"complete\", file);\n        };\n      })(this));\n      this.on(\"complete\", (function(_this) {\n        return function(file) {\n          if (_this.getAddedFiles().length === 0 && _this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {\n            return setTimeout((function() {\n              return _this.emit(\"queuecomplete\");\n            }), 0);\n          }\n        };\n      })(this));\n      noPropagation = function(e) {\n        e.stopPropagation();\n        if (e.preventDefault) {\n          return e.preventDefault();\n        } else {\n          return e.returnValue = false;\n        }\n      };\n      this.listeners = [\n        {\n          element: this.element,\n          events: {\n            \"dragstart\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragstart\", e);\n              };\n            })(this),\n            \"dragenter\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.emit(\"dragenter\", e);\n              };\n            })(this),\n            \"dragover\": (function(_this) {\n              return function(e) {\n                var efct;\n                try {\n                  efct = e.dataTransfer.effectAllowed;\n                } catch (_error) {}\n                e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\n                noPropagation(e);\n                return _this.emit(\"dragover\", e);\n              };\n            })(this),\n            \"dragleave\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragleave\", e);\n              };\n            })(this),\n            \"drop\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.drop(e);\n              };\n            })(this),\n            \"dragend\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragend\", e);\n              };\n            })(this)\n          }\n        }\n      ];\n      this.clickableElements.forEach((function(_this) {\n        return function(clickableElement) {\n          return _this.listeners.push({\n            element: clickableElement,\n            events: {\n              \"click\": function(evt) {\n                if ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(\".dz-message\")))) {\n                  _this.hiddenFileInput.click();\n                }\n                return true;\n              }\n            }\n          });\n        };\n      })(this));\n      this.enable();\n      return this.options.init.call(this);\n    };\n\n    Dropzone.prototype.destroy = function() {\n      var _ref;\n      this.disable();\n      this.removeAllFiles(true);\n      if ((_ref = this.hiddenFileInput) != null ? _ref.parentNode : void 0) {\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n      }\n      delete this.element.dropzone;\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n    };\n\n    Dropzone.prototype.updateTotalUploadProgress = function() {\n      var activeFiles, file, totalBytes, totalBytesSent, totalUploadProgress, _i, _len, _ref;\n      totalBytesSent = 0;\n      totalBytes = 0;\n      activeFiles = this.getActiveFiles();\n      if (activeFiles.length) {\n        _ref = this.getActiveFiles();\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          totalBytesSent += file.upload.bytesSent;\n          totalBytes += file.upload.total;\n        }\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\n      } else {\n        totalUploadProgress = 100;\n      }\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n    };\n\n    Dropzone.prototype._getParamName = function(n) {\n      if (typeof this.options.paramName === \"function\") {\n        return this.options.paramName(n);\n      } else {\n        return \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\n      }\n    };\n\n    Dropzone.prototype._renameFilename = function(name) {\n      if (typeof this.options.renameFilename !== \"function\") {\n        return name;\n      }\n      return this.options.renameFilename(name);\n    };\n\n    Dropzone.prototype.getFallbackForm = function() {\n      var existingFallback, fields, fieldsString, form;\n      if (existingFallback = this.getExistingFallback()) {\n        return existingFallback;\n      }\n      fieldsString = \"<div class=\\\"dz-fallback\\\">\";\n      if (this.options.dictFallbackText) {\n        fieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\n      }\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\" + (this._getParamName(0)) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : void 0) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\n      fields = Dropzone.createElement(fieldsString);\n      if (this.element.tagName !== \"FORM\") {\n        form = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\n        form.appendChild(fields);\n      } else {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n        this.element.setAttribute(\"method\", this.options.method);\n      }\n      return form != null ? form : fields;\n    };\n\n    Dropzone.prototype.getExistingFallback = function() {\n      var fallback, getFallback, tagName, _i, _len, _ref;\n      getFallback = function(elements) {\n        var el, _i, _len;\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )fallback($| )/.test(el.className)) {\n            return el;\n          }\n        }\n      };\n      _ref = [\"div\", \"form\"];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        tagName = _ref[_i];\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n          return fallback;\n        }\n      }\n    };\n\n    Dropzone.prototype.setupEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.addEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.removeEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.removeEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.disable = function() {\n      var file, _i, _len, _ref, _results;\n      this.clickableElements.forEach(function(element) {\n        return element.classList.remove(\"dz-clickable\");\n      });\n      this.removeEventListeners();\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        _results.push(this.cancelUpload(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.enable = function() {\n      this.clickableElements.forEach(function(element) {\n        return element.classList.add(\"dz-clickable\");\n      });\n      return this.setupEventListeners();\n    };\n\n    Dropzone.prototype.filesize = function(size) {\n      var cutoff, i, selectedSize, selectedUnit, unit, units, _i, _len;\n      selectedSize = 0;\n      selectedUnit = \"b\";\n      if (size > 0) {\n        units = ['TB', 'GB', 'MB', 'KB', 'b'];\n        for (i = _i = 0, _len = units.length; _i < _len; i = ++_i) {\n          unit = units[i];\n          cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n          if (size >= cutoff) {\n            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n            selectedUnit = unit;\n            break;\n          }\n        }\n        selectedSize = Math.round(10 * selectedSize) / 10;\n      }\n      return \"<strong>\" + selectedSize + \"</strong> \" + selectedUnit;\n    };\n\n    Dropzone.prototype._updateMaxFilesReachedClass = function() {\n      if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\n          this.emit('maxfilesreached', this.files);\n        }\n        return this.element.classList.add(\"dz-max-files-reached\");\n      } else {\n        return this.element.classList.remove(\"dz-max-files-reached\");\n      }\n    };\n\n    Dropzone.prototype.drop = function(e) {\n      var files, items;\n      if (!e.dataTransfer) {\n        return;\n      }\n      this.emit(\"drop\", e);\n      files = e.dataTransfer.files;\n      this.emit(\"addedfiles\", files);\n      if (files.length) {\n        items = e.dataTransfer.items;\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\n          this._addFilesFromItems(items);\n        } else {\n          this.handleFiles(files);\n        }\n      }\n    };\n\n    Dropzone.prototype.paste = function(e) {\n      var items, _ref;\n      if ((e != null ? (_ref = e.clipboardData) != null ? _ref.items : void 0 : void 0) == null) {\n        return;\n      }\n      this.emit(\"paste\", e);\n      items = e.clipboardData.items;\n      if (items.length) {\n        return this._addFilesFromItems(items);\n      }\n    };\n\n    Dropzone.prototype.handleFiles = function(files) {\n      var file, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        _results.push(this.addFile(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromItems = function(items) {\n      var entry, item, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = items.length; _i < _len; _i++) {\n        item = items[_i];\n        if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n          if (entry.isFile) {\n            _results.push(this.addFile(item.getAsFile()));\n          } else if (entry.isDirectory) {\n            _results.push(this._addFilesFromDirectory(entry, entry.name));\n          } else {\n            _results.push(void 0);\n          }\n        } else if (item.getAsFile != null) {\n          if ((item.kind == null) || item.kind === \"file\") {\n            _results.push(this.addFile(item.getAsFile()));\n          } else {\n            _results.push(void 0);\n          }\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromDirectory = function(directory, path) {\n      var dirReader, errorHandler, readEntries;\n      dirReader = directory.createReader();\n      errorHandler = function(error) {\n        return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(error) : void 0 : void 0;\n      };\n      readEntries = (function(_this) {\n        return function() {\n          return dirReader.readEntries(function(entries) {\n            var entry, _i, _len;\n            if (entries.length > 0) {\n              for (_i = 0, _len = entries.length; _i < _len; _i++) {\n                entry = entries[_i];\n                if (entry.isFile) {\n                  entry.file(function(file) {\n                    if (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\n                      return;\n                    }\n                    file.fullPath = \"\" + path + \"/\" + file.name;\n                    return _this.addFile(file);\n                  });\n                } else if (entry.isDirectory) {\n                  _this._addFilesFromDirectory(entry, \"\" + path + \"/\" + entry.name);\n                }\n              }\n              readEntries();\n            }\n            return null;\n          }, errorHandler);\n        };\n      })(this);\n      return readEntries();\n    };\n\n    Dropzone.prototype.accept = function(file, done) {\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\n        return done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n        return done(this.options.dictInvalidFileType);\n      } else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n        return this.emit(\"maxfilesexceeded\", file);\n      } else {\n        return this.options.accept.call(this, file, done);\n      }\n    };\n\n    Dropzone.prototype.addFile = function(file) {\n      file.upload = {\n        progress: 0,\n        total: file.size,\n        bytesSent: 0\n      };\n      this.files.push(file);\n      file.status = Dropzone.ADDED;\n      this.emit(\"addedfile\", file);\n      this._enqueueThumbnail(file);\n      return this.accept(file, (function(_this) {\n        return function(error) {\n          if (error) {\n            file.accepted = false;\n            _this._errorProcessing([file], error);\n          } else {\n            file.accepted = true;\n            if (_this.options.autoQueue) {\n              _this.enqueueFile(file);\n            }\n          }\n          return _this._updateMaxFilesReachedClass();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.enqueueFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        this.enqueueFile(file);\n      }\n      return null;\n    };\n\n    Dropzone.prototype.enqueueFile = function(file) {\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\n        file.status = Dropzone.QUEUED;\n        if (this.options.autoProcessQueue) {\n          return setTimeout(((function(_this) {\n            return function() {\n              return _this.processQueue();\n            };\n          })(this)), 0);\n        }\n      } else {\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n      }\n    };\n\n    Dropzone.prototype._thumbnailQueue = [];\n\n    Dropzone.prototype._processingThumbnail = false;\n\n    Dropzone.prototype._enqueueThumbnail = function(file) {\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this._thumbnailQueue.push(file);\n        return setTimeout(((function(_this) {\n          return function() {\n            return _this._processThumbnailQueue();\n          };\n        })(this)), 0);\n      }\n    };\n\n    Dropzone.prototype._processThumbnailQueue = function() {\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n        return;\n      }\n      this._processingThumbnail = true;\n      return this.createThumbnail(this._thumbnailQueue.shift(), (function(_this) {\n        return function() {\n          _this._processingThumbnail = false;\n          return _this._processThumbnailQueue();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.removeFile = function(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        this.cancelUpload(file);\n      }\n      this.files = without(this.files, file);\n      this.emit(\"removedfile\", file);\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    };\n\n    Dropzone.prototype.removeAllFiles = function(cancelIfNecessary) {\n      var file, _i, _len, _ref;\n      if (cancelIfNecessary == null) {\n        cancelIfNecessary = false;\n      }\n      _ref = this.files.slice();\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n          this.removeFile(file);\n        }\n      }\n      return null;\n    };\n\n    Dropzone.prototype.createThumbnail = function(file, callback) {\n      var fileReader;\n      fileReader = new FileReader;\n      fileReader.onload = (function(_this) {\n        return function() {\n          if (file.type === \"image/svg+xml\") {\n            _this.emit(\"thumbnail\", file, fileReader.result);\n            if (callback != null) {\n              callback();\n            }\n            return;\n          }\n          return _this.createThumbnailFromUrl(file, fileReader.result, callback);\n        };\n      })(this);\n      return fileReader.readAsDataURL(file);\n    };\n\n    Dropzone.prototype.createThumbnailFromUrl = function(file, imageUrl, callback, crossOrigin) {\n      var img;\n      img = document.createElement(\"img\");\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n      img.onload = (function(_this) {\n        return function() {\n          var canvas, ctx, resizeInfo, thumbnail, _ref, _ref1, _ref2, _ref3;\n          file.width = img.width;\n          file.height = img.height;\n          resizeInfo = _this.options.resize.call(_this, file);\n          if (resizeInfo.trgWidth == null) {\n            resizeInfo.trgWidth = resizeInfo.optWidth;\n          }\n          if (resizeInfo.trgHeight == null) {\n            resizeInfo.trgHeight = resizeInfo.optHeight;\n          }\n          canvas = document.createElement(\"canvas\");\n          ctx = canvas.getContext(\"2d\");\n          canvas.width = resizeInfo.trgWidth;\n          canvas.height = resizeInfo.trgHeight;\n          drawImageIOSFix(ctx, img, (_ref = resizeInfo.srcX) != null ? _ref : 0, (_ref1 = resizeInfo.srcY) != null ? _ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (_ref2 = resizeInfo.trgX) != null ? _ref2 : 0, (_ref3 = resizeInfo.trgY) != null ? _ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n          thumbnail = canvas.toDataURL(\"image/png\");\n          _this.emit(\"thumbnail\", file, thumbnail);\n          if (callback != null) {\n            return callback();\n          }\n        };\n      })(this);\n      if (callback != null) {\n        img.onerror = callback;\n      }\n      return img.src = imageUrl;\n    };\n\n    Dropzone.prototype.processQueue = function() {\n      var i, parallelUploads, processingLength, queuedFiles;\n      parallelUploads = this.options.parallelUploads;\n      processingLength = this.getUploadingFiles().length;\n      i = processingLength;\n      if (processingLength >= parallelUploads) {\n        return;\n      }\n      queuedFiles = this.getQueuedFiles();\n      if (!(queuedFiles.length > 0)) {\n        return;\n      }\n      if (this.options.uploadMultiple) {\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n      } else {\n        while (i < parallelUploads) {\n          if (!queuedFiles.length) {\n            return;\n          }\n          this.processFile(queuedFiles.shift());\n          i++;\n        }\n      }\n    };\n\n    Dropzone.prototype.processFile = function(file) {\n      return this.processFiles([file]);\n    };\n\n    Dropzone.prototype.processFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.processing = true;\n        file.status = Dropzone.UPLOADING;\n        this.emit(\"processing\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"processingmultiple\", files);\n      }\n      return this.uploadFiles(files);\n    };\n\n    Dropzone.prototype._getFilesWithXhr = function(xhr) {\n      var file, files;\n      return files = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.files;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          if (file.xhr === xhr) {\n            _results.push(file);\n          }\n        }\n        return _results;\n      }).call(this);\n    };\n\n    Dropzone.prototype.cancelUpload = function(file) {\n      var groupedFile, groupedFiles, _i, _j, _len, _len1, _ref;\n      if (file.status === Dropzone.UPLOADING) {\n        groupedFiles = this._getFilesWithXhr(file.xhr);\n        for (_i = 0, _len = groupedFiles.length; _i < _len; _i++) {\n          groupedFile = groupedFiles[_i];\n          groupedFile.status = Dropzone.CANCELED;\n        }\n        file.xhr.abort();\n        for (_j = 0, _len1 = groupedFiles.length; _j < _len1; _j++) {\n          groupedFile = groupedFiles[_j];\n          this.emit(\"canceled\", groupedFile);\n        }\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", groupedFiles);\n        }\n      } else if ((_ref = file.status) === Dropzone.ADDED || _ref === Dropzone.QUEUED) {\n        file.status = Dropzone.CANCELED;\n        this.emit(\"canceled\", file);\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", [file]);\n        }\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    resolveOption = function() {\n      var args, option;\n      option = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (typeof option === 'function') {\n        return option.apply(this, args);\n      }\n      return option;\n    };\n\n    Dropzone.prototype.uploadFile = function(file) {\n      return this.uploadFiles([file]);\n    };\n\n    Dropzone.prototype.uploadFiles = function(files) {\n      var file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, key, method, option, progressObj, response, updateProgress, url, value, xhr, _i, _j, _k, _l, _len, _len1, _len2, _len3, _m, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;\n      xhr = new XMLHttpRequest();\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.xhr = xhr;\n      }\n      method = resolveOption(this.options.method, files);\n      url = resolveOption(this.options.url, files);\n      xhr.open(method, url, true);\n      xhr.withCredentials = !!this.options.withCredentials;\n      response = null;\n      handleError = (function(_this) {\n        return function() {\n          var _j, _len1, _results;\n          _results = [];\n          for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n            file = files[_j];\n            _results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr));\n          }\n          return _results;\n        };\n      })(this);\n      updateProgress = (function(_this) {\n        return function(e) {\n          var allFilesFinished, progress, _j, _k, _l, _len1, _len2, _len3, _results;\n          if (e != null) {\n            progress = 100 * e.loaded / e.total;\n            for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n              file = files[_j];\n              file.upload = {\n                progress: progress,\n                total: e.total,\n                bytesSent: e.loaded\n              };\n            }\n          } else {\n            allFilesFinished = true;\n            progress = 100;\n            for (_k = 0, _len2 = files.length; _k < _len2; _k++) {\n              file = files[_k];\n              if (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {\n                allFilesFinished = false;\n              }\n              file.upload.progress = progress;\n              file.upload.bytesSent = file.upload.total;\n            }\n            if (allFilesFinished) {\n              return;\n            }\n          }\n          _results = [];\n          for (_l = 0, _len3 = files.length; _l < _len3; _l++) {\n            file = files[_l];\n            _results.push(_this.emit(\"uploadprogress\", file, progress, file.upload.bytesSent));\n          }\n          return _results;\n        };\n      })(this);\n      xhr.onload = (function(_this) {\n        return function(e) {\n          var _ref;\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          if (xhr.readyState !== 4) {\n            return;\n          }\n          response = xhr.responseText;\n          if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n            try {\n              response = JSON.parse(response);\n            } catch (_error) {\n              e = _error;\n              response = \"Invalid JSON response from server.\";\n            }\n          }\n          updateProgress();\n          if (!((200 <= (_ref = xhr.status) && _ref < 300))) {\n            return handleError();\n          } else {\n            return _this._finished(files, response, e);\n          }\n        };\n      })(this);\n      xhr.onerror = (function(_this) {\n        return function() {\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          return handleError();\n        };\n      })(this);\n      progressObj = (_ref = xhr.upload) != null ? _ref : xhr;\n      progressObj.onprogress = updateProgress;\n      headers = {\n        \"Accept\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      };\n      if (this.options.headers) {\n        extend(headers, this.options.headers);\n      }\n      for (headerName in headers) {\n        headerValue = headers[headerName];\n        if (headerValue) {\n          xhr.setRequestHeader(headerName, headerValue);\n        }\n      }\n      formData = new FormData();\n      if (this.options.params) {\n        _ref1 = this.options.params;\n        for (key in _ref1) {\n          value = _ref1[key];\n          formData.append(key, value);\n        }\n      }\n      for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n        file = files[_j];\n        this.emit(\"sending\", file, xhr, formData);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"sendingmultiple\", files, xhr, formData);\n      }\n      if (this.element.tagName === \"FORM\") {\n        _ref2 = this.element.querySelectorAll(\"input, textarea, select, button\");\n        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n          input = _ref2[_k];\n          inputName = input.getAttribute(\"name\");\n          inputType = input.getAttribute(\"type\");\n          if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n            _ref3 = input.options;\n            for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {\n              option = _ref3[_l];\n              if (option.selected) {\n                formData.append(inputName, option.value);\n              }\n            }\n          } else if (!inputType || ((_ref4 = inputType.toLowerCase()) !== \"checkbox\" && _ref4 !== \"radio\") || input.checked) {\n            formData.append(inputName, input.value);\n          }\n        }\n      }\n      for (i = _m = 0, _ref5 = files.length - 1; 0 <= _ref5 ? _m <= _ref5 : _m >= _ref5; i = 0 <= _ref5 ? ++_m : --_m) {\n        formData.append(this._getParamName(i), files[i], this._renameFilename(files[i].name));\n      }\n      return this.submitRequest(xhr, formData, files);\n    };\n\n    Dropzone.prototype.submitRequest = function(xhr, formData, files) {\n      return xhr.send(formData);\n    };\n\n    Dropzone.prototype._finished = function(files, responseText, e) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.SUCCESS;\n        this.emit(\"success\", file, responseText, e);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"successmultiple\", files, responseText, e);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    Dropzone.prototype._errorProcessing = function(files, message, xhr) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.ERROR;\n        this.emit(\"error\", file, message, xhr);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"errormultiple\", files, message, xhr);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    return Dropzone;\n\n  })(Emitter);\n\n  Dropzone.version = \"4.3.0\";\n\n  Dropzone.options = {};\n\n  Dropzone.optionsForElement = function(element) {\n    if (element.getAttribute(\"id\")) {\n      return Dropzone.options[camelize(element.getAttribute(\"id\"))];\n    } else {\n      return void 0;\n    }\n  };\n\n  Dropzone.instances = [];\n\n  Dropzone.forElement = function(element) {\n    if (typeof element === \"string\") {\n      element = document.querySelector(element);\n    }\n    if ((element != null ? element.dropzone : void 0) == null) {\n      throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n    }\n    return element.dropzone;\n  };\n\n  Dropzone.autoDiscover = true;\n\n  Dropzone.discover = function() {\n    var checkElements, dropzone, dropzones, _i, _len, _results;\n    if (document.querySelectorAll) {\n      dropzones = document.querySelectorAll(\".dropzone\");\n    } else {\n      dropzones = [];\n      checkElements = function(elements) {\n        var el, _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )dropzone($| )/.test(el.className)) {\n            _results.push(dropzones.push(el));\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      };\n      checkElements(document.getElementsByTagName(\"div\"));\n      checkElements(document.getElementsByTagName(\"form\"));\n    }\n    _results = [];\n    for (_i = 0, _len = dropzones.length; _i < _len; _i++) {\n      dropzone = dropzones[_i];\n      if (Dropzone.optionsForElement(dropzone) !== false) {\n        _results.push(new Dropzone(dropzone));\n      } else {\n        _results.push(void 0);\n      }\n    }\n    return _results;\n  };\n\n  Dropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\n\n  Dropzone.isBrowserSupported = function() {\n    var capableBrowser, regex, _i, _len, _ref;\n    capableBrowser = true;\n    if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n      if (!(\"classList\" in document.createElement(\"a\"))) {\n        capableBrowser = false;\n      } else {\n        _ref = Dropzone.blacklistedBrowsers;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          regex = _ref[_i];\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      }\n    } else {\n      capableBrowser = false;\n    }\n    return capableBrowser;\n  };\n\n  without = function(list, rejectedItem) {\n    var item, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = list.length; _i < _len; _i++) {\n      item = list[_i];\n      if (item !== rejectedItem) {\n        _results.push(item);\n      }\n    }\n    return _results;\n  };\n\n  camelize = function(str) {\n    return str.replace(/[\\-_](\\w)/g, function(match) {\n      return match.charAt(1).toUpperCase();\n    });\n  };\n\n  Dropzone.createElement = function(string) {\n    var div;\n    div = document.createElement(\"div\");\n    div.innerHTML = string;\n    return div.childNodes[0];\n  };\n\n  Dropzone.elementInside = function(element, container) {\n    if (element === container) {\n      return true;\n    }\n    while (element = element.parentNode) {\n      if (element === container) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  Dropzone.getElement = function(el, name) {\n    var element;\n    if (typeof el === \"string\") {\n      element = document.querySelector(el);\n    } else if (el.nodeType != null) {\n      element = el;\n    }\n    if (element == null) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\n    }\n    return element;\n  };\n\n  Dropzone.getElements = function(els, name) {\n    var e, el, elements, _i, _j, _len, _len1, _ref;\n    if (els instanceof Array) {\n      elements = [];\n      try {\n        for (_i = 0, _len = els.length; _i < _len; _i++) {\n          el = els[_i];\n          elements.push(this.getElement(el, name));\n        }\n      } catch (_error) {\n        e = _error;\n        elements = null;\n      }\n    } else if (typeof els === \"string\") {\n      elements = [];\n      _ref = document.querySelectorAll(els);\n      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n        el = _ref[_j];\n        elements.push(el);\n      }\n    } else if (els.nodeType != null) {\n      elements = [els];\n    }\n    if (!((elements != null) && elements.length)) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\n    }\n    return elements;\n  };\n\n  Dropzone.confirm = function(question, accepted, rejected) {\n    if (window.confirm(question)) {\n      return accepted();\n    } else if (rejected != null) {\n      return rejected();\n    }\n  };\n\n  Dropzone.isValidFile = function(file, acceptedFiles) {\n    var baseMimeType, mimeType, validType, _i, _len;\n    if (!acceptedFiles) {\n      return true;\n    }\n    acceptedFiles = acceptedFiles.split(\",\");\n    mimeType = file.type;\n    baseMimeType = mimeType.replace(/\\/.*$/, \"\");\n    for (_i = 0, _len = acceptedFiles.length; _i < _len; _i++) {\n      validType = acceptedFiles[_i];\n      validType = validType.trim();\n      if (validType.charAt(0) === \".\") {\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n    jQuery.fn.dropzone = function(options) {\n      return this.each(function() {\n        return new Dropzone(this, options);\n      });\n    };\n  }\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = Dropzone;\n  } else {\n    window.Dropzone = Dropzone;\n  }\n\n  Dropzone.ADDED = \"added\";\n\n  Dropzone.QUEUED = \"queued\";\n\n  Dropzone.ACCEPTED = Dropzone.QUEUED;\n\n  Dropzone.UPLOADING = \"uploading\";\n\n  Dropzone.PROCESSING = Dropzone.UPLOADING;\n\n  Dropzone.CANCELED = \"canceled\";\n\n  Dropzone.ERROR = \"error\";\n\n  Dropzone.SUCCESS = \"success\";\n\n\n  /*\n  \n  Bugfix for iOS 6 and 7\n  Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n  based on the work of https://github.com/stomita/ios-imagefile-megapixel\n   */\n\n  detectVerticalSquash = function(img) {\n    var alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;\n    iw = img.naturalWidth;\n    ih = img.naturalHeight;\n    canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = ih;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    data = ctx.getImageData(0, 0, 1, ih).data;\n    sy = 0;\n    ey = ih;\n    py = ih;\n    while (py > sy) {\n      alpha = data[(py - 1) * 4 + 3];\n      if (alpha === 0) {\n        ey = py;\n      } else {\n        sy = py;\n      }\n      py = (ey + sy) >> 1;\n    }\n    ratio = py / ih;\n    if (ratio === 0) {\n      return 1;\n    } else {\n      return ratio;\n    }\n  };\n\n  drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n    var vertSquashRatio;\n    vertSquashRatio = detectVerticalSquash(img);\n    return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n  };\n\n\n  /*\n   * contentloaded.js\n   *\n   * Author: Diego Perini (diego.perini at gmail.com)\n   * Summary: cross-browser wrapper for DOMContentLoaded\n   * Updated: 20101020\n   * License: MIT\n   * Version: 1.2\n   *\n   * URL:\n   * http://javascript.nwbox.com/ContentLoaded/\n   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n   */\n\n  contentLoaded = function(win, fn) {\n    var add, doc, done, init, poll, pre, rem, root, top;\n    done = false;\n    top = true;\n    doc = win.document;\n    root = doc.documentElement;\n    add = (doc.addEventListener ? \"addEventListener\" : \"attachEvent\");\n    rem = (doc.addEventListener ? \"removeEventListener\" : \"detachEvent\");\n    pre = (doc.addEventListener ? \"\" : \"on\");\n    init = function(e) {\n      if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n        return;\n      }\n      (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n      if (!done && (done = true)) {\n        return fn.call(win, e.type || e);\n      }\n    };\n    poll = function() {\n      var e;\n      try {\n        root.doScroll(\"left\");\n      } catch (_error) {\n        e = _error;\n        setTimeout(poll, 50);\n        return;\n      }\n      return init(\"poll\");\n    };\n    if (doc.readyState !== \"complete\") {\n      if (doc.createEventObject && root.doScroll) {\n        try {\n          top = !win.frameElement;\n        } catch (_error) {}\n        if (top) {\n          poll();\n        }\n      }\n      doc[add](pre + \"DOMContentLoaded\", init, false);\n      doc[add](pre + \"readystatechange\", init, false);\n      return win[add](pre + \"load\", init, false);\n    }\n  };\n\n  Dropzone._autoDiscoverFunction = function() {\n    if (Dropzone.autoDiscover) {\n      return Dropzone.discover();\n    }\n  };\n\n  contentLoaded(window, Dropzone._autoDiscoverFunction);\n\n}).call(this);",
        "output": "str",
        "x": 450,
        "y": 940,
        "wires": [
            [
                "109a850de30d1be1"
            ]
        ]
    },
    {
        "id": "9c30ea0c5c307fdd",
        "type": "http in",
        "z": "78e8048a75698e3b",
        "name": "",
        "url": "/complex",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 940,
        "wires": [
            [
                "cda48ab070ab366b"
            ]
        ]
    },
    {
        "id": "5f526e7f7496216a",
        "type": "template",
        "z": "78e8048a75698e3b",
        "name": "html",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<script>\n    {{{dropzonejs}}}\n</script>\n<style>\n    {{{css}}}\n</style>\n\n<script>\n    // \"myAwesomeDropzone\" is the camelized version of the HTML element's ID\n    Dropzone.options.myDropzone = {\n      paramName: \"myFile\", // The name that will be used to transfer the file\n      maxFilesize: 2, // MB\n      accept: function(file, done) {\n        if (file.name == \"justinbieber.jpg\") {\n          done(\"Naha, you don't.\");\n        }\n        else { done(); }\n      }\n    };\n</script>\n\n<h1>Upload a file here:</h1>\n\n<form action=\"/uploadpretty\" class=\"dropzone\" method=\"post\" enctype=\"multipart/form-data\" id=\"my-dropzone\">\n  <div class=\"fallback\">\n    <input name=\"myFile\" type=\"file\" />\n    <input type=\"submit\" value=\"Submit\">\n  </div>\n</form>",
        "output": "str",
        "x": 770,
        "y": 940,
        "wires": [
            [
                "0fb3fc2742c45b86"
            ]
        ]
    },
    {
        "id": "0fb3fc2742c45b86",
        "type": "http response",
        "z": "78e8048a75698e3b",
        "name": "",
        "x": 930,
        "y": 940,
        "wires": []
    },
    {
        "id": "eeac646c2fc6b8da",
        "type": "http response",
        "z": "78e8048a75698e3b",
        "name": "",
        "x": 690,
        "y": 840,
        "wires": []
    },
    {
        "id": "109a850de30d1be1",
        "type": "template",
        "z": "78e8048a75698e3b",
        "name": "css",
        "field": "css",
        "fieldType": "msg",
        "format": "css",
        "syntax": "mustache",
        "template": "/*\n * The MIT License\n * Copyright (c) 2012 Matias Meno <m@tias.me>\n */\n@-webkit-keyframes passing-through {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    -moz-transform: translateY(40px);\n    -ms-transform: translateY(40px);\n    -o-transform: translateY(40px);\n    transform: translateY(40px); }\n  30%, 70% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    -moz-transform: translateY(0px);\n    -ms-transform: translateY(0px);\n    -o-transform: translateY(0px);\n    transform: translateY(0px); }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(-40px);\n    -moz-transform: translateY(-40px);\n    -ms-transform: translateY(-40px);\n    -o-transform: translateY(-40px);\n    transform: translateY(-40px); } }\n@-moz-keyframes passing-through {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    -moz-transform: translateY(40px);\n    -ms-transform: translateY(40px);\n    -o-transform: translateY(40px);\n    transform: translateY(40px); }\n  30%, 70% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    -moz-transform: translateY(0px);\n    -ms-transform: translateY(0px);\n    -o-transform: translateY(0px);\n    transform: translateY(0px); }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(-40px);\n    -moz-transform: translateY(-40px);\n    -ms-transform: translateY(-40px);\n    -o-transform: translateY(-40px);\n    transform: translateY(-40px); } }\n@keyframes passing-through {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    -moz-transform: translateY(40px);\n    -ms-transform: translateY(40px);\n    -o-transform: translateY(40px);\n    transform: translateY(40px); }\n  30%, 70% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    -moz-transform: translateY(0px);\n    -ms-transform: translateY(0px);\n    -o-transform: translateY(0px);\n    transform: translateY(0px); }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(-40px);\n    -moz-transform: translateY(-40px);\n    -ms-transform: translateY(-40px);\n    -o-transform: translateY(-40px);\n    transform: translateY(-40px); } }\n@-webkit-keyframes slide-in {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    -moz-transform: translateY(40px);\n    -ms-transform: translateY(40px);\n    -o-transform: translateY(40px);\n    transform: translateY(40px); }\n  30% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    -moz-transform: translateY(0px);\n    -ms-transform: translateY(0px);\n    -o-transform: translateY(0px);\n    transform: translateY(0px); } }\n@-moz-keyframes slide-in {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    -moz-transform: translateY(40px);\n    -ms-transform: translateY(40px);\n    -o-transform: translateY(40px);\n    transform: translateY(40px); }\n  30% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    -moz-transform: translateY(0px);\n    -ms-transform: translateY(0px);\n    -o-transform: translateY(0px);\n    transform: translateY(0px); } }\n@keyframes slide-in {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    -moz-transform: translateY(40px);\n    -ms-transform: translateY(40px);\n    -o-transform: translateY(40px);\n    transform: translateY(40px); }\n  30% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    -moz-transform: translateY(0px);\n    -ms-transform: translateY(0px);\n    -o-transform: translateY(0px);\n    transform: translateY(0px); } }\n@-webkit-keyframes pulse {\n  0% {\n    -webkit-transform: scale(1);\n    -moz-transform: scale(1);\n    -ms-transform: scale(1);\n    -o-transform: scale(1);\n    transform: scale(1); }\n  10% {\n    -webkit-transform: scale(1.1);\n    -moz-transform: scale(1.1);\n    -ms-transform: scale(1.1);\n    -o-transform: scale(1.1);\n    transform: scale(1.1); }\n  20% {\n    -webkit-transform: scale(1);\n    -moz-transform: scale(1);\n    -ms-transform: scale(1);\n    -o-transform: scale(1);\n    transform: scale(1); } }\n@-moz-keyframes pulse {\n  0% {\n    -webkit-transform: scale(1);\n    -moz-transform: scale(1);\n    -ms-transform: scale(1);\n    -o-transform: scale(1);\n    transform: scale(1); }\n  10% {\n    -webkit-transform: scale(1.1);\n    -moz-transform: scale(1.1);\n    -ms-transform: scale(1.1);\n    -o-transform: scale(1.1);\n    transform: scale(1.1); }\n  20% {\n    -webkit-transform: scale(1);\n    -moz-transform: scale(1);\n    -ms-transform: scale(1);\n    -o-transform: scale(1);\n    transform: scale(1); } }\n@keyframes pulse {\n  0% {\n    -webkit-transform: scale(1);\n    -moz-transform: scale(1);\n    -ms-transform: scale(1);\n    -o-transform: scale(1);\n    transform: scale(1); }\n  10% {\n    -webkit-transform: scale(1.1);\n    -moz-transform: scale(1.1);\n    -ms-transform: scale(1.1);\n    -o-transform: scale(1.1);\n    transform: scale(1.1); }\n  20% {\n    -webkit-transform: scale(1);\n    -moz-transform: scale(1);\n    -ms-transform: scale(1);\n    -o-transform: scale(1);\n    transform: scale(1); } }\n.dropzone, .dropzone * {\n  box-sizing: border-box; }\n\n.dropzone {\n  min-height: 150px;\n  border: 2px solid rgba(0, 0, 0, 0.3);\n  background: white;\n  padding: 20px 20px; }\n  .dropzone.dz-clickable {\n    cursor: pointer; }\n    .dropzone.dz-clickable * {\n      cursor: default; }\n    .dropzone.dz-clickable .dz-message, .dropzone.dz-clickable .dz-message * {\n      cursor: pointer; }\n  .dropzone.dz-started .dz-message {\n    display: none; }\n  .dropzone.dz-drag-hover {\n    border-style: solid; }\n    .dropzone.dz-drag-hover .dz-message {\n      opacity: 0.5; }\n  .dropzone .dz-message {\n    text-align: center;\n    margin: 2em 0; }\n  .dropzone .dz-preview {\n    position: relative;\n    display: inline-block;\n    vertical-align: top;\n    margin: 16px;\n    min-height: 100px; }\n    .dropzone .dz-preview:hover {\n      z-index: 1000; }\n      .dropzone .dz-preview:hover .dz-details {\n        opacity: 1; }\n    .dropzone .dz-preview.dz-file-preview .dz-image {\n      border-radius: 20px;\n      background: #999;\n      background: linear-gradient(to bottom, #eee, #ddd); }\n    .dropzone .dz-preview.dz-file-preview .dz-details {\n      opacity: 1; }\n    .dropzone .dz-preview.dz-image-preview {\n      background: white; }\n      .dropzone .dz-preview.dz-image-preview .dz-details {\n        -webkit-transition: opacity 0.2s linear;\n        -moz-transition: opacity 0.2s linear;\n        -ms-transition: opacity 0.2s linear;\n        -o-transition: opacity 0.2s linear;\n        transition: opacity 0.2s linear; }\n    .dropzone .dz-preview .dz-remove {\n      font-size: 14px;\n      text-align: center;\n      display: block;\n      cursor: pointer;\n      border: none; }\n      .dropzone .dz-preview .dz-remove:hover {\n        text-decoration: underline; }\n    .dropzone .dz-preview:hover .dz-details {\n      opacity: 1; }\n    .dropzone .dz-preview .dz-details {\n      z-index: 20;\n      position: absolute;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      font-size: 13px;\n      min-width: 100%;\n      max-width: 100%;\n      padding: 2em 1em;\n      text-align: center;\n      color: rgba(0, 0, 0, 0.9);\n      line-height: 150%; }\n      .dropzone .dz-preview .dz-details .dz-size {\n        margin-bottom: 1em;\n        font-size: 16px; }\n      .dropzone .dz-preview .dz-details .dz-filename {\n        white-space: nowrap; }\n        .dropzone .dz-preview .dz-details .dz-filename:hover span {\n          border: 1px solid rgba(200, 200, 200, 0.8);\n          background-color: rgba(255, 255, 255, 0.8); }\n        .dropzone .dz-preview .dz-details .dz-filename:not(:hover) {\n          overflow: hidden;\n          text-overflow: ellipsis; }\n          .dropzone .dz-preview .dz-details .dz-filename:not(:hover) span {\n            border: 1px solid transparent; }\n      .dropzone .dz-preview .dz-details .dz-filename span, .dropzone .dz-preview .dz-details .dz-size span {\n        background-color: rgba(255, 255, 255, 0.4);\n        padding: 0 0.4em;\n        border-radius: 3px; }\n    .dropzone .dz-preview:hover .dz-image img {\n      -webkit-transform: scale(1.05, 1.05);\n      -moz-transform: scale(1.05, 1.05);\n      -ms-transform: scale(1.05, 1.05);\n      -o-transform: scale(1.05, 1.05);\n      transform: scale(1.05, 1.05);\n      -webkit-filter: blur(8px);\n      filter: blur(8px); }\n    .dropzone .dz-preview .dz-image {\n      border-radius: 20px;\n      overflow: hidden;\n      width: 120px;\n      height: 120px;\n      position: relative;\n      display: block;\n      z-index: 10; }\n      .dropzone .dz-preview .dz-image img {\n        display: block; }\n    .dropzone .dz-preview.dz-success .dz-success-mark {\n      -webkit-animation: passing-through 3s cubic-bezier(0.77, 0, 0.175, 1);\n      -moz-animation: passing-through 3s cubic-bezier(0.77, 0, 0.175, 1);\n      -ms-animation: passing-through 3s cubic-bezier(0.77, 0, 0.175, 1);\n      -o-animation: passing-through 3s cubic-bezier(0.77, 0, 0.175, 1);\n      animation: passing-through 3s cubic-bezier(0.77, 0, 0.175, 1); }\n    .dropzone .dz-preview.dz-error .dz-error-mark {\n      opacity: 1;\n      -webkit-animation: slide-in 3s cubic-bezier(0.77, 0, 0.175, 1);\n      -moz-animation: slide-in 3s cubic-bezier(0.77, 0, 0.175, 1);\n      -ms-animation: slide-in 3s cubic-bezier(0.77, 0, 0.175, 1);\n      -o-animation: slide-in 3s cubic-bezier(0.77, 0, 0.175, 1);\n      animation: slide-in 3s cubic-bezier(0.77, 0, 0.175, 1); }\n    .dropzone .dz-preview .dz-success-mark, .dropzone .dz-preview .dz-error-mark {\n      pointer-events: none;\n      opacity: 0;\n      z-index: 500;\n      position: absolute;\n      display: block;\n      top: 50%;\n      left: 50%;\n      margin-left: -27px;\n      margin-top: -27px; }\n      .dropzone .dz-preview .dz-success-mark svg, .dropzone .dz-preview .dz-error-mark svg {\n        display: block;\n        width: 54px;\n        height: 54px; }\n    .dropzone .dz-preview.dz-processing .dz-progress {\n      opacity: 1;\n      -webkit-transition: all 0.2s linear;\n      -moz-transition: all 0.2s linear;\n      -ms-transition: all 0.2s linear;\n      -o-transition: all 0.2s linear;\n      transition: all 0.2s linear; }\n    .dropzone .dz-preview.dz-complete .dz-progress {\n      opacity: 0;\n      -webkit-transition: opacity 0.4s ease-in;\n      -moz-transition: opacity 0.4s ease-in;\n      -ms-transition: opacity 0.4s ease-in;\n      -o-transition: opacity 0.4s ease-in;\n      transition: opacity 0.4s ease-in; }\n    .dropzone .dz-preview:not(.dz-processing) .dz-progress {\n      -webkit-animation: pulse 6s ease infinite;\n      -moz-animation: pulse 6s ease infinite;\n      -ms-animation: pulse 6s ease infinite;\n      -o-animation: pulse 6s ease infinite;\n      animation: pulse 6s ease infinite; }\n    .dropzone .dz-preview .dz-progress {\n      opacity: 1;\n      z-index: 1000;\n      pointer-events: none;\n      position: absolute;\n      height: 16px;\n      left: 50%;\n      top: 50%;\n      margin-top: -8px;\n      width: 80px;\n      margin-left: -40px;\n      background: rgba(255, 255, 255, 0.9);\n      -webkit-transform: scale(1);\n      border-radius: 8px;\n      overflow: hidden; }\n      .dropzone .dz-preview .dz-progress .dz-upload {\n        background: #333;\n        background: linear-gradient(to bottom, #666, #444);\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        width: 0;\n        -webkit-transition: width 300ms ease-in-out;\n        -moz-transition: width 300ms ease-in-out;\n        -ms-transition: width 300ms ease-in-out;\n        -o-transition: width 300ms ease-in-out;\n        transition: width 300ms ease-in-out; }\n    .dropzone .dz-preview.dz-error .dz-error-message {\n      display: block; }\n    .dropzone .dz-preview.dz-error:hover .dz-error-message {\n      opacity: 1;\n      pointer-events: auto; }\n    .dropzone .dz-preview .dz-error-message {\n      pointer-events: none;\n      z-index: 1000;\n      position: absolute;\n      display: block;\n      display: none;\n      opacity: 0;\n      -webkit-transition: opacity 0.3s ease;\n      -moz-transition: opacity 0.3s ease;\n      -ms-transition: opacity 0.3s ease;\n      -o-transition: opacity 0.3s ease;\n      transition: opacity 0.3s ease;\n      border-radius: 8px;\n      font-size: 13px;\n      top: 130px;\n      left: -10px;\n      width: 140px;\n      background: #be2626;\n      background: linear-gradient(to bottom, #be2626, #a92222);\n      padding: 0.5em 1.2em;\n      color: white; }\n      .dropzone .dz-preview .dz-error-message:after {\n        content: '';\n        position: absolute;\n        top: -6px;\n        left: 64px;\n        width: 0;\n        height: 0;\n        border-left: 6px solid transparent;\n        border-right: 6px solid transparent;\n        border-bottom: 6px solid #be2626; }",
        "output": "str",
        "x": 630,
        "y": 940,
        "wires": [
            [
                "5f526e7f7496216a"
            ]
        ]
    },
    {
        "id": "db90f9cff64a2104",
        "type": "http in",
        "z": "78e8048a75698e3b",
        "name": "",
        "url": "/uploadpretty",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 230,
        "y": 1000,
        "wires": [
            [
                "b4a81a31b456bd52",
                "6755424332b1fcaa"
            ]
        ]
    },
    {
        "id": "6a35cf9f2440a394",
        "type": "http in",
        "z": "78e8048a75698e3b",
        "name": "",
        "url": "/upload",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 210,
        "y": 840,
        "wires": [
            [
                "19328cfc84edef58"
            ]
        ]
    },
    {
        "id": "5c21b2f86c695b51",
        "type": "template",
        "z": "78e8048a75698e3b",
        "name": "html",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<p></p>File {{name}} uploaded !</p>\n\n<h2>Contents:</h2>\n\n<pre>\n{{{payload}}}\n</pre>",
        "output": "str",
        "x": 550,
        "y": 840,
        "wires": [
            [
                "eeac646c2fc6b8da"
            ]
        ]
    },
    {
        "id": "19328cfc84edef58",
        "type": "function",
        "z": "78e8048a75698e3b",
        "name": "toBase64",
        "func": "msg.name = msg.req.files[0].originalname;\n\nif (msg.req.files[0].mimetype.includes('image')) {\n    msg.payload = `<img src=\"data:image/gif;base64,${msg.req.files[0].buffer.toString('base64')}\">`;\n} else {\n    msg.payload = msg.req.files[0].buffer.toString();\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 400,
        "y": 840,
        "wires": [
            [
                "5c21b2f86c695b51"
            ]
        ]
    },
    {
        "id": "5d4a5cea258ace08",
        "type": "comment",
        "z": "78e8048a75698e3b",
        "name": "Complex",
        "info": "",
        "x": 200,
        "y": 900,
        "wires": []
    },
    {
        "id": "6755424332b1fcaa",
        "type": "debug",
        "z": "78e8048a75698e3b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "req.files",
        "statusVal": "",
        "statusType": "auto",
        "x": 458,
        "y": 1057,
        "wires": []
    },
    {
        "id": "53a34e44be26de06",
        "type": "file",
        "z": "78e8048a75698e3b",
        "name": "save image to folder",
        "filename": "/home/christian/birdbox/latest.jpg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "base64",
        "x": 920,
        "y": 1200,
        "wires": [
            [
                "2843d5a04b9b5f54",
                "cec08fc2697f3510"
            ]
        ]
    },
    {
        "id": "468ee0bbd8f0e38c",
        "type": "comment",
        "z": "78e8048a75698e3b",
        "name": "Saving image",
        "info": "",
        "x": 397,
        "y": 1149,
        "wires": []
    },
    {
        "id": "2843d5a04b9b5f54",
        "type": "debug",
        "z": "78e8048a75698e3b",
        "name": "file",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1150,
        "y": 1200,
        "wires": []
    },
    {
        "id": "a95cf4b7a3155a19",
        "type": "ui_button",
        "z": "78e8048a75698e3b",
        "name": "",
        "group": "ba799367.ad2e3",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Take Picture",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 210,
        "y": 1200,
        "wires": [
            [
                "21a81b9aac27a75e"
            ]
        ]
    },
    {
        "id": "895aa90c41d6b634",
        "type": "comment",
        "z": "78e8048a75698e3b",
        "name": "Latest image",
        "info": "This template node has the HTML code to display\nthe latest image from the motion program.\n",
        "x": 390,
        "y": 1360,
        "wires": []
    },
    {
        "id": "055949e1056fd42b",
        "type": "ui_template",
        "z": "78e8048a75698e3b",
        "group": "8a23a84e.52b3f8",
        "name": "Last Image",
        "order": 2,
        "width": "7",
        "height": "7",
        "format": "<!--<img name=\"main\" id=\"main\" border=\"0\" width=\"480\" height=\"460\" src=\"../webcam/{{msg.stamp}}.jpg\"> -->\n<img width=\"480\" height\"460\" src=\"/home/christian/birdbox/latest.jpg\" />\n\n<br>\nLAST IMAGE <h3>\n   <i class=\"fa fa-download\" aria-hidden=\"true\"></i>\n   <a href=\"../gif/{{ msg.payload }}.gif\" download=\"time-shift.gif\">Download This GIF </a>|\n   <i class=\"fa fa-refresh\" aria-hidden=\"true\"></i>\n   <a href=\"../ui\"> Reload Page</a>\n      \n</h3>",
        "storeOutMessages": true,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 590,
        "y": 1420,
        "wires": [
            [
                "028f733af8c68c0c"
            ]
        ]
    },
    {
        "id": "028f733af8c68c0c",
        "type": "debug",
        "z": "78e8048a75698e3b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 770,
        "y": 1420,
        "wires": []
    },
    {
        "id": "f5eb704ba4fc6e09",
        "type": "debug",
        "z": "78e8048a75698e3b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 470,
        "y": 1240,
        "wires": []
    },
    {
        "id": "21a81b9aac27a75e",
        "type": "function",
        "z": "78e8048a75698e3b",
        "name": "set payload and headers",
        "func": "msg.headers = {};\n//msg.headers['Accept-Encoding'] = 'gzip';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 1200,
        "wires": [
            [
                "cfe6f2ccafa101c9"
            ]
        ]
    },
    {
        "id": "c6dea42eec7df505",
        "type": "watch",
        "z": "78e8048a75698e3b",
        "name": "latest.jpeg",
        "files": "/home/christian/birdbox/latest.jpg",
        "recursive": "",
        "x": 380,
        "y": 1420,
        "wires": [
            [
                "055949e1056fd42b",
                "f7f88d474d2e847e"
            ]
        ]
    },
    {
        "id": "cfe6f2ccafa101c9",
        "type": "jimp-image",
        "z": "78e8048a75698e3b",
        "name": "single capture",
        "data": "http://192.168.22.7/capture",
        "dataType": "str",
        "ret": "img",
        "parameter1": "",
        "parameter1Type": "msg",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 680,
        "y": 1200,
        "wires": [
            [
                "53a34e44be26de06"
            ]
        ]
    },
    {
        "id": "f7f88d474d2e847e",
        "type": "image viewer",
        "z": "78e8048a75698e3b",
        "name": "",
        "width": "160",
        "data": "payload",
        "dataType": "msg",
        "x": 910,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "cec08fc2697f3510",
        "type": "image viewer",
        "z": "78e8048a75698e3b",
        "name": "",
        "width": "160",
        "data": "payload",
        "dataType": "msg",
        "x": 1150,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "7aa6b94726e64054",
        "type": "configurable interval",
        "z": "78e8048a75698e3b",
        "name": "configurable interval",
        "interval": "10",
        "onstart": false,
        "do_enable": false,
        "msg": "capture photo",
        "showstatus": true,
        "unit": "seconds",
        "statusformat": "YYYY-MM-D HH:mm:ss",
        "x": 240,
        "y": 1280,
        "wires": [
            [
                "f5eb704ba4fc6e09",
                "21a81b9aac27a75e"
            ]
        ]
    },
    {
        "id": "538b26d984e0ba70",
        "type": "jimp-image",
        "z": "78e8048a75698e3b",
        "name": "",
        "data": "_image",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "_mask",
        "parameter1Type": "msg",
        "parameter2": "0",
        "parameter2Type": "num",
        "parameter3": "0",
        "parameter3Type": "num",
        "parameter4": "BLEND_EXCLUSION",
        "parameter4Type": "Blend",
        "parameter5": "1",
        "parameter5Type": "msg",
        "parameter6": "1",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 3,
        "jimpFunction": "mask",
        "selectedJimpFunction": {
            "name": "mask",
            "fn": "mask",
            "description": "masks the image with another Jimp image at x, y using average pixel value",
            "parameters": [
                {
                    "name": "src",
                    "type": "",
                    "required": true,
                    "hint": "the source image (a Jimp instance)",
                    "defaultType": "msg",
                    "defaultValue": "payload"
                },
                {
                    "name": "x",
                    "type": "num",
                    "required": true,
                    "hint": "the horizontal position to blit the image"
                },
                {
                    "name": "y",
                    "type": "num",
                    "required": true,
                    "hint": "the vertical position to blit the image"
                }
            ]
        },
        "x": 890,
        "y": 460,
        "wires": [
            [
                "cd130aea6bf5aa2d",
                "eab919d5e7621103"
            ]
        ]
    },
    {
        "id": "8c562271834180a9",
        "type": "jimp-image",
        "z": "78e8048a75698e3b",
        "name": "",
        "data": "/data/image.jpg",
        "dataType": "str",
        "ret": "img",
        "parameter1": "4294967295",
        "parameter1Type": "num",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "_image",
        "sendPropertyType": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 550,
        "y": 460,
        "wires": [
            [
                "291d03abe4da925d"
            ]
        ]
    },
    {
        "id": "6cd5be943a851dd9",
        "type": "jimp-image",
        "z": "78e8048a75698e3b",
        "name": "",
        "data": "/data/mask.jpg",
        "dataType": "str",
        "ret": "img",
        "parameter1": "",
        "parameter1Type": "msg",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "_mask",
        "sendPropertyType": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 390,
        "y": 460,
        "wires": [
            [
                "8c562271834180a9"
            ]
        ]
    },
    {
        "id": "f25a1f3f68e2c9d9",
        "type": "inject",
        "z": "78e8048a75698e3b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 460,
        "wires": [
            [
                "6cd5be943a851dd9"
            ]
        ]
    },
    {
        "id": "76fd6add5fab6bfd",
        "type": "image viewer",
        "z": "78e8048a75698e3b",
        "name": "",
        "width": "480",
        "data": "payload",
        "dataType": "msg",
        "active": true,
        "x": 1590,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "cd130aea6bf5aa2d",
        "type": "image viewer",
        "z": "78e8048a75698e3b",
        "name": "",
        "width": "480",
        "data": "_image",
        "dataType": "msg",
        "active": true,
        "x": 1050,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "291d03abe4da925d",
        "type": "jimp-image",
        "z": "78e8048a75698e3b",
        "name": "",
        "data": "_image",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "4294967295",
        "parameter1Type": "num",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "_image",
        "sendPropertyType": "msg",
        "parameterCount": 1,
        "jimpFunction": "background",
        "selectedJimpFunction": {
            "name": "background",
            "fn": "background",
            "description": "set the default new pixel colour (e.g. 0xFFFFFFFF or 0x00000000) useful for by some operations e.g. contain or rotate",
            "parameters": [
                {
                    "name": "hex",
                    "type": "num",
                    "required": true,
                    "hint": "hexadecimal rgba value (must be entered as a decimal e.g. 0xFFFFFFFF = 4294967295)",
                    "defaultValue": "4294967295"
                }
            ]
        },
        "x": 710,
        "y": 460,
        "wires": [
            [
                "538b26d984e0ba70"
            ]
        ]
    },
    {
        "id": "eab919d5e7621103",
        "type": "jimp-image",
        "z": "78e8048a75698e3b",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "ret": "buf",
        "parameter1": "220",
        "parameter1Type": "num",
        "parameter2": "235",
        "parameter2Type": "num",
        "parameter3": "325",
        "parameter3Type": "num",
        "parameter4": "215",
        "parameter4Type": "num",
        "parameter5": "1",
        "parameter5Type": "msg",
        "parameter6": "1",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 4,
        "jimpFunction": "crop",
        "selectedJimpFunction": {
            "name": "crop",
            "fn": "crop",
            "description": "crop to the given region",
            "parameters": [
                {
                    "name": "x",
                    "type": "num",
                    "required": true,
                    "hint": "the x coordinate to crop form"
                },
                {
                    "name": "y",
                    "type": "num",
                    "required": true,
                    "hint": "the y coordinate to crop form"
                },
                {
                    "name": "w",
                    "type": "num",
                    "required": true,
                    "hint": "the width of the crop region"
                },
                {
                    "name": "h",
                    "type": "num",
                    "required": true,
                    "hint": "the height of the crop region"
                }
            ]
        },
        "x": 1110,
        "y": 460,
        "wires": [
            [
                "76fd6add5fab6bfd"
            ]
        ]
    },
    {
        "id": "cb07195c220852dc",
        "type": "alexa-home",
        "z": "536de40af535d04c",
        "conf": "ec76383e9eb4eed0",
        "device": "180564",
        "acknoledge": true,
        "name": "MotionInPatio",
        "topic": "Motion",
        "x": 130,
        "y": 400,
        "wires": [
            [
                "2c3d79fba7b52ca4",
                "a219ce1d523dcdcc"
            ]
        ]
    },
    {
        "id": "42f0a449ca09263a",
        "type": "kasa",
        "z": "536de40af535d04c",
        "name": "Courtyard - HS220(US)",
        "device": "192.168.0.108",
        "interval": 60000,
        "eventInterval": 15000,
        "payload": "getInfo",
        "payloadType": "info",
        "debug": true,
        "x": 970,
        "y": 400,
        "wires": [
            [
                "48a26776c681bad5"
            ]
        ]
    },
    {
        "id": "da16397efcd05dbe",
        "type": "bigtimer",
        "z": "536de40af535d04c",
        "outtopic": "Dark",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Is It Dark?",
        "comment": "",
        "lat": "32.7157",
        "lon": "-117.1611",
        "starttime": "5004",
        "endtime": "5006",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "20",
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 110,
        "y": 540,
        "wires": [
            [
                "2c3d79fba7b52ca4",
                "d349dcc85b3af224",
                "a219ce1d523dcdcc"
            ],
            [],
            []
        ]
    },
    {
        "id": "2c3d79fba7b52ca4",
        "type": "BooleanLogicUltimate",
        "z": "536de40af535d04c",
        "name": "",
        "payloadPropName": "payload",
        "filtertrue": "both",
        "persist": true,
        "sInitializeWith": "false",
        "triggertopic": "Motion",
        "outputtriggeredby": "onlyonetopic",
        "inputCount": 2,
        "topic": "result",
        "restrictinputevaluation": false,
        "delayEvaluation": "",
        "x": 380,
        "y": 400,
        "wires": [
            [
                "a219ce1d523dcdcc",
                "4bc742514d4bc456"
            ],
            [],
            []
        ]
    },
    {
        "id": "d349dcc85b3af224",
        "type": "BooleanLogicUltimate",
        "z": "536de40af535d04c",
        "name": "",
        "payloadPropName": "payload",
        "filtertrue": "both",
        "persist": true,
        "sInitializeWith": "false",
        "triggertopic": "Motion",
        "outputtriggeredby": "onlyonetopic",
        "inputCount": 2,
        "topic": "result",
        "restrictinputevaluation": false,
        "delayEvaluation": "",
        "x": 380,
        "y": 720,
        "wires": [
            [
                "25cee0c48696cb62"
            ],
            [],
            []
        ]
    },
    {
        "id": "a950dccc74dce3a2",
        "type": "kasa",
        "z": "536de40af535d04c",
        "name": "Front Patio - HS200(US)",
        "device": "192.168.0.139",
        "interval": 60000,
        "eventInterval": 15000,
        "payload": "getInfo",
        "payloadType": "info",
        "debug": true,
        "x": 950,
        "y": 900,
        "wires": [
            [
                "ec65954e9a0748c1"
            ]
        ]
    },
    {
        "id": "e801e4c8c6579a10",
        "type": "alexa-home",
        "z": "536de40af535d04c",
        "conf": "ec76383e9eb4eed0",
        "device": "180548",
        "acknoledge": true,
        "name": "MotionAtDoor",
        "topic": "Motion",
        "x": 130,
        "y": 720,
        "wires": [
            [
                "d349dcc85b3af224",
                "2c3d79fba7b52ca4"
            ]
        ]
    },
    {
        "id": "c766e4a0e7e85607",
        "type": "inject",
        "z": "536de40af535d04c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 670,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "bdc4a14ebf5383b8",
        "type": "change",
        "z": "536de40af535d04c",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 960,
        "wires": [
            [
                "a950dccc74dce3a2",
                "aa61fde59f9d09b5"
            ]
        ]
    },
    {
        "id": "317ad8d1c5241617",
        "type": "bigtimer",
        "z": "536de40af535d04c",
        "outtopic": "Porch",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Porch Timer",
        "comment": "",
        "lat": "32.7157",
        "lon": "-117.1611",
        "starttime": "5004",
        "endtime": "1320",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "20",
        "endoff": "0",
        "startoff2": 0,
        "endoff2": 0,
        "offs": "0",
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": true,
        "randoff1": true,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 110,
        "y": 840,
        "wires": [
            [
                "25cee0c48696cb62"
            ],
            [],
            []
        ]
    },
    {
        "id": "25cee0c48696cb62",
        "type": "BooleanLogicUltimate",
        "z": "536de40af535d04c",
        "name": "",
        "payloadPropName": "payload",
        "filtertrue": "both",
        "persist": true,
        "sInitializeWith": "false",
        "triggertopic": "Motion",
        "outputtriggeredby": "all",
        "inputCount": 2,
        "topic": "result",
        "restrictinputevaluation": false,
        "delayEvaluation": "2000",
        "x": 380,
        "y": 820,
        "wires": [
            [],
            [
                "a66c561f09109787"
            ],
            []
        ]
    },
    {
        "id": "10326ce5cbd27aa8",
        "type": "change",
        "z": "536de40af535d04c",
        "name": "On",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 400,
        "wires": [
            [
                "f60b066f44da8ddf",
                "42f0a449ca09263a",
                "1c03148d90ecf084"
            ]
        ]
    },
    {
        "id": "ee630472d32847d0",
        "type": "trigger",
        "z": "536de40af535d04c",
        "name": "",
        "op1": "",
        "op2": "false",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "5",
        "extend": true,
        "overrideDelay": true,
        "units": "min",
        "reset": "reset",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 550,
        "y": 960,
        "wires": [
            [
                "bdc4a14ebf5383b8"
            ]
        ]
    },
    {
        "id": "a66c561f09109787",
        "type": "switch",
        "z": "536de40af535d04c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 575,
        "y": 820,
        "wires": [
            [
                "044657eaac11e9db"
            ]
        ],
        "icon": "font-awesome/fa-filter",
        "l": false
    },
    {
        "id": "044657eaac11e9db",
        "type": "change",
        "z": "536de40af535d04c",
        "name": "On",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 820,
        "wires": [
            [
                "a950dccc74dce3a2",
                "51d76ec54bea47b5",
                "2f6229d259b5b2d2"
            ]
        ]
    },
    {
        "id": "befc60495bee4787",
        "type": "change",
        "z": "536de40af535d04c",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 520,
        "wires": [
            [
                "42f0a449ca09263a",
                "0d4e52fdc1f3f8bf"
            ]
        ]
    },
    {
        "id": "5cbb89d02d60bac8",
        "type": "trigger",
        "z": "536de40af535d04c",
        "name": "",
        "op1": "",
        "op2": "false",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "15",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "reset",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 550,
        "y": 520,
        "wires": [
            [
                "befc60495bee4787"
            ]
        ]
    },
    {
        "id": "a219ce1d523dcdcc",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 350,
        "y": 300,
        "wires": []
    },
    {
        "id": "f60b066f44da8ddf",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 340,
        "wires": []
    },
    {
        "id": "4bc742514d4bc456",
        "type": "switch",
        "z": "536de40af535d04c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 575,
        "y": 400,
        "wires": [
            [
                "10326ce5cbd27aa8"
            ]
        ],
        "icon": "font-awesome/fa-filter",
        "l": false
    },
    {
        "id": "ec65954e9a0748c1",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 900,
        "wires": []
    },
    {
        "id": "48a26776c681bad5",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 400,
        "wires": []
    },
    {
        "id": "51d76ec54bea47b5",
        "type": "random",
        "z": "536de40af535d04c",
        "name": "",
        "low": "300000",
        "high": "900000",
        "inte": "true",
        "property": "delay",
        "x": 380,
        "y": 960,
        "wires": [
            [
                "ee630472d32847d0",
                "cbc01948f6f5bf69"
            ]
        ]
    },
    {
        "id": "cbc01948f6f5bf69",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 1060,
        "wires": []
    },
    {
        "id": "aa61fde59f9d09b5",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 861.6666870117188,
        "y": 1078.3333740234375,
        "wires": []
    },
    {
        "id": "2f6229d259b5b2d2",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 760,
        "wires": []
    },
    {
        "id": "0d4e52fdc1f3f8bf",
        "type": "debug",
        "z": "536de40af535d04c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 560,
        "wires": []
    },
    {
        "id": "1c03148d90ecf084",
        "type": "random",
        "z": "536de40af535d04c",
        "name": "",
        "low": "300000",
        "high": "900000",
        "inte": "true",
        "property": "delay",
        "x": 380,
        "y": 520,
        "wires": [
            [
                "5cbb89d02d60bac8"
            ]
        ]
    }
]